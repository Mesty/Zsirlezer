/**
  ******************************************************************************
  * File Name          : main.c
  * Description        : Main program body
  ******************************************************************************
  *
  * COPYRIGHT(c) 2017 STMicroelectronics
  *
  * Redistribution and use in source and binary forms, with or without modification,
  * are permitted provided that the following conditions are met:
  *   1. Redistributions of source code must retain the above copyright notice,
  *      this list of conditions and the following disclaimer.
  *   2. Redistributions in binary form must reproduce the above copyright notice,
  *      this list of conditions and the following disclaimer in the documentation
  *      and/or other materials provided with the distribution.
  *   3. Neither the name of STMicroelectronics nor the names of its contributors
  *      may be used to endorse or promote products derived from this software
  *      without specific prior written permission.
  *
  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  *
  ******************************************************************************
  */
/* Includes ------------------------------------------------------------------*/
#include "main.h"
#include "stm32f4xx_hal.h"
#include "adc.h"
#include "dma.h"
#include "spi.h"
#include "tim.h"
#include "usart.h"
#include "gpio.h"
#include "math.h"

/* USER CODE BEGIN Includes */
#include "stdbool.h"


//Defineok
//Vonalszam
#define NINCSVONAL 10
#define EGYVONAL 1
#define KETVONAL 2
#define HAROMVONAL 3
#define VONALHIBA 15

//Vonalobjektumok
#define GYORSITO 5
#define LASSITO 6

/* USER CODE END Includes */

/* Private variables ---------------------------------------------------------*/

/* USER CODE BEGIN PV */
/* Private variables ---------------------------------------------------------*/

float atan_lut[5400] = {
	 -3315.088,
	 -3314.4111, -3313.7338, -3313.0563, -3312.3784, -3311.7003, -3311.0218, -3310.3431, -3309.664, -3308.9846, -3308.305,
	 -3307.625, -3306.9447, -3306.2641, -3305.5832, -3304.902, -3304.2205, -3303.5388, -3302.8566, -3302.1742, -3301.4915,
	 -3300.8085, -3300.1252, -3299.4416, -3298.7576, -3298.0734, -3297.3889, -3296.704, -3296.0188, -3295.3334, -3294.6476,
	 -3293.9615, -3293.2752, -3292.5885, -3291.9015, -3291.2142, -3290.5266, -3289.8387, -3289.1504, -3288.4619, -3287.7731,
	 -3287.0839, -3286.3945, -3285.7047, -3285.0146, -3284.3242, -3283.6335, -3282.9425, -3282.2512, -3281.5596, -3280.8677,
	 -3280.1755, -3279.4829, -3278.79, -3278.0969, -3277.4034, -3276.7096, -3276.0155, -3275.3211, -3274.6264, -3273.9314,
	 -3273.236, -3272.5404, -3271.8444, -3271.1481, -3270.4515, -3269.7546, -3269.0574, -3268.3599, -3267.662, -3266.9639,
	 -3266.2654, -3265.5666, -3264.8676, -3264.1682, -3263.4684, -3262.7684, -3262.0681, -3261.3674, -3260.6664, -3259.9651,
	 -3259.2635, -3258.5616, -3257.8594, -3257.1568, -3256.454, -3255.7508, -3255.0473, -3254.3435, -3253.6394, -3252.9349,
	 -3252.2302, -3251.5251, -3250.8197, -3250.114, -3249.408, -3248.7016, -3247.995, -3247.288, -3246.5807, -3245.8731,
	 -3245.1652, -3244.4569, -3243.7484, -3243.0395, -3242.3303, -3241.6208, -3240.9109, -3240.2008, -3239.4903, -3238.7795,
	 -3238.0684, -3237.357, -3236.6452, -3235.9331, -3235.2207, -3234.508, -3233.795, -3233.0816, -3232.368, -3231.654,
	 -3230.9397, -3230.225, -3229.5101, -3228.7948, -3228.0792, -3227.3633, -3226.647, -3225.9304, -3225.2136, -3224.4963,
	 -3223.7788, -3223.0609, -3222.3428, -3221.6243, -3220.9054, -3220.1863, -3219.4668, -3218.747, -3218.0269, -3217.3064,
	 -3216.5857, -3215.8646, -3215.1431, -3214.4214, -3213.6993, -3212.9769, -3212.2542, -3211.5312, -3210.8078, -3210.0841,
	 -3209.3601, -3208.6357, -3207.911, -3207.186, -3206.4607, -3205.7351, -3205.0091, -3204.2828, -3203.5561, -3202.8292,
	 -3202.1019, -3201.3742, -3200.6463, -3199.918, -3199.1894, -3198.4605, -3197.7312, -3197.0016, -3196.2717, -3195.5415,
	 -3194.8109, -3194.08, -3193.3487, -3192.6172, -3191.8853, -3191.153, -3190.4205, -3189.6876, -3188.9544, -3188.2208,
	 -3187.4869, -3186.7527, -3186.0182, -3185.2833, -3184.5481, -3183.8126, -3183.0767, -3182.3405, -3181.604, -3180.8671,
	 -3180.1299, -3179.3924, -3178.6545, -3177.9163, -3177.1778, -3176.4389, -3175.6997, -3174.9602, -3174.2203, -3173.4801,
	 -3172.7396, -3171.9987, -3171.2575, -3170.5159, -3169.7741, -3169.0318, -3168.2893, -3167.5464, -3166.8032, -3166.0597,
	 -3165.3158, -3164.5715, -3163.827, -3163.0821, -3162.3368, -3161.5913, -3160.8454, -3160.0991, -3159.3525, -3158.6056,
	 -3157.8584, -3157.1108, -3156.3628, -3155.6146, -3154.8659, -3154.117, -3153.3677, -3152.6181, -3151.8681, -3151.1178,
	 -3150.3672, -3149.6162, -3148.8649, -3148.1132, -3147.3612, -3146.6088, -3145.8562, -3145.1031, -3144.3498, -3143.5961,
	 -3142.842, -3142.0876, -3141.3329, -3140.5778, -3139.8224, -3139.0667, -3138.3106, -3137.5541, -3136.7973, -3136.0402,
	 -3135.2827, -3134.5249, -3133.7668, -3133.0083, -3132.2494, -3131.4903, -3130.7307, -3129.9709, -3129.2106, -3128.4501,
	 -3127.6892, -3126.9279, -3126.1663, -3125.4044, -3124.6421, -3123.8795, -3123.1165, -3122.3532, -3121.5895, -3120.8255,
	 -3120.0611, -3119.2964, -3118.5314, -3117.766, -3117.0002, -3116.2341, -3115.4677, -3114.7009, -3113.9338, -3113.1663,
	 -3112.3984, -3111.6303, -3110.8617, -3110.0929, -3109.3236, -3108.5541, -3107.7841, -3107.0139, -3106.2432, -3105.4723,
	 -3104.7009, -3103.9293, -3103.1573, -3102.3849, -3101.6122, -3100.8391, -3100.0657, -3099.2919, -3098.5178, -3097.7433,
	 -3096.9685, -3096.1933, -3095.4178, -3094.6419, -3093.8656, -3093.0891, -3092.3121, -3091.5348, -3090.7572, -3089.9792,
	 -3089.2008, -3088.4221, -3087.6431, -3086.8637, -3086.0839, -3085.3038, -3084.5233, -3083.7425, -3082.9613, -3082.1798,
	 -3081.3979, -3080.6156, -3079.833, -3079.0501, -3078.2668, -3077.4831, -3076.6991, -3075.9147, -3075.13, -3074.3449,
	 -3073.5594, -3072.7736, -3071.9875, -3071.2009, -3070.4141, -3069.6268, -3068.8392, -3068.0513, -3067.263, -3066.4743,
	 -3065.6853, -3064.8959, -3064.1062, -3063.3161, -3062.5256, -3061.7348, -3060.9436, -3060.1521, -3059.3602, -3058.5679,
	 -3057.7753, -3056.9823, -3056.189, -3055.3953, -3054.6012, -3053.8068, -3053.012, -3052.2169, -3051.4214, -3050.6255,
	 -3049.8293, -3049.0327, -3048.2358, -3047.4385, -3046.6408, -3045.8427, -3045.0443, -3044.2456, -3043.4465, -3042.647,
	 -3041.8471, -3041.0469, -3040.2463, -3039.4454, -3038.6441, -3037.8424, -3037.0404, -3036.238, -3035.4352, -3034.632,
	 -3033.8286, -3033.0247, -3032.2205, -3031.4159, -3030.6109, -3029.8056, -3028.9999, -3028.1938, -3027.3874, -3026.5806,
	 -3025.7734, -3024.9659, -3024.158, -3023.3498, -3022.5411, -3021.7321, -3020.9228, -3020.113, -3019.3029, -3018.4925,
	 -3017.6816, -3016.8704, -3016.0588, -3015.2469, -3014.4346, -3013.6219, -3012.8088, -3011.9954, -3011.1816, -3010.3674,
	 -3009.5529, -3008.738, -3007.9227, -3007.1071, -3006.291, -3005.4746, -3004.6579, -3003.8407, -3003.0232, -3002.2054,
	 -3001.3871, -3000.5685, -2999.7495, -2998.9301, -2998.1104, -2997.2902, -2996.4698, -2995.6489, -2994.8277, -2994.006,
	 -2993.1841, -2992.3617, -2991.539, -2990.7159, -2989.8924, -2989.0685, -2988.2443, -2987.4197, -2986.5947, -2985.7693,
	 -2984.9436, -2984.1175, -2983.291, -2982.4641, -2981.6369, -2980.8093, -2979.9813, -2979.1529, -2978.3242, -2977.4951,
	 -2976.6655, -2975.8357, -2975.0054, -2974.1748, -2973.3438, -2972.5124, -2971.6806, -2970.8484, -2970.0159, -2969.183,
	 -2968.3497, -2967.5161, -2966.682, -2965.8476, -2965.0128, -2964.1776, -2963.342, -2962.5061, -2961.6697, -2960.833,
	 -2959.9959, -2959.1585, -2958.3206, -2957.4824, -2956.6438, -2955.8048, -2954.9654, -2954.1256, -2953.2855, -2952.445,
	 -2951.604, -2950.7628, -2949.9211, -2949.079, -2948.2366, -2947.3937, -2946.5505, -2945.7069, -2944.863, -2944.0186,
	 -2943.1738, -2942.3287, -2941.4832, -2940.6373, -2939.791, -2938.9443, -2938.0973, -2937.2498, -2936.402, -2935.5538,
	 -2934.7052, -2933.8562, -2933.0068, -2932.157, -2931.3069, -2930.4564, -2929.6054, -2928.7541, -2927.9024, -2927.0503,
	 -2926.1978, -2925.345, -2924.4917, -2923.6381, -2922.784, -2921.9296, -2921.0748, -2920.2196, -2919.364, -2918.5081,
	 -2917.6517, -2916.7949, -2915.9378, -2915.0802, -2914.2223, -2913.364, -2912.5053, -2911.6462, -2910.7867, -2909.9268,
	 -2909.0665, -2908.2059, -2907.3448, -2906.4833, -2905.6215, -2904.7593, -2903.8966, -2903.0336, -2902.1702, -2901.3064,
	 -2900.4422, -2899.5776, -2898.7126, -2897.8472, -2896.9814, -2896.1153, -2895.2487, -2894.3817, -2893.5144, -2892.6466,
	 -2891.7785, -2890.9099, -2890.041, -2889.1717, -2888.3019, -2887.4318, -2886.5613, -2885.6904, -2884.819, -2883.9473,
	 -2883.0752, -2882.2027, -2881.3298, -2880.4565, -2879.5828, -2878.7087, -2877.8342, -2876.9593, -2876.0841, -2875.2084,
	 -2874.3323, -2873.4558, -2872.5789, -2871.7016, -2870.8239, -2869.9459, -2869.0674, -2868.1885, -2867.3092, -2866.4295,
	 -2865.5494, -2864.669, -2863.7881, -2862.9068, -2862.0251, -2861.143, -2860.2605, -2859.3776, -2858.4943, -2857.6106,
	 -2856.7266, -2855.8421, -2854.9572, -2854.0718, -2853.1861, -2852.3, -2851.4135, -2850.5266, -2849.6393, -2848.7515,
	 -2847.8634, -2846.9749, -2846.0859, -2845.1966, -2844.3069, -2843.4167, -2842.5262, -2841.6352, -2840.7438, -2839.8521,
	 -2838.9599, -2838.0673, -2837.1743, -2836.2809, -2835.3871, -2834.4929, -2833.5983, -2832.7033, -2831.8078, -2830.912,
	 -2830.0157, -2829.1191, -2828.222, -2827.3246, -2826.4267, -2825.5284, -2824.6297, -2823.7306, -2822.8311, -2821.9312,
	 -2821.0308, -2820.1301, -2819.229, -2818.3274, -2817.4254, -2816.5231, -2815.6203, -2814.7171, -2813.8135, -2812.9094,
	 -2812.005, -2811.1002, -2810.1949, -2809.2893, -2808.3832, -2807.4767, -2806.5698, -2805.6625, -2804.7548, -2803.8466,
	 -2802.9381, -2802.0291, -2801.1197, -2800.2099, -2799.2997, -2798.3891, -2797.4781, -2796.5667, -2795.6548, -2794.7425,
	 -2793.8298, -2792.9167, -2792.0032, -2791.0893, -2790.175, -2789.2602, -2788.345, -2787.4294, -2786.5134, -2785.597,
	 -2784.6802, -2783.7629, -2782.8452, -2781.9271, -2781.0086, -2780.0897, -2779.1704, -2778.2506, -2777.3304, -2776.4099,
	 -2775.4888, -2774.5674, -2773.6456, -2772.7233, -2771.8006, -2770.8775, -2769.954, -2769.0301, -2768.1057, -2767.1809,
	 -2766.2557, -2765.3301, -2764.4041, -2763.4776, -2762.5507, -2761.6234, -2760.6957, -2759.7676, -2758.839, -2757.91,
	 -2756.9806, -2756.0508, -2755.1206, -2754.1899, -2753.2588, -2752.3273, -2751.3954, -2750.463, -2749.5302, -2748.597,
	 -2747.6634, -2746.7293, -2745.7949, -2744.86, -2743.9247, -2742.9889, -2742.0527, -2741.1161, -2740.1791, -2739.2417,
	 -2738.3038, -2737.3655, -2736.4268, -2735.4877, -2734.5481, -2733.6081, -2732.6677, -2731.7269, -2730.7856, -2729.8439,
	 -2728.9018, -2727.9592, -2727.0163, -2726.0729, -2725.129, -2724.1848, -2723.2401, -2722.295, -2721.3494, -2720.4035,
	 -2719.4571, -2718.5102, -2717.563, -2716.6153, -2715.6672, -2714.7187, -2713.7697, -2712.8203, -2711.8705, -2710.9202,
	 -2709.9695, -2709.0184, -2708.0669, -2707.1149, -2706.1625, -2705.2096, -2704.2564, -2703.3027, -2702.3486, -2701.394,
	 -2700.439, -2699.4836, -2698.5277, -2697.5714, -2696.6147, -2695.6576, -2694.7, -2693.742, -2692.7835, -2691.8246,
	 -2690.8653, -2689.9055, -2688.9454, -2687.9847, -2687.0237, -2686.0622, -2685.1003, -2684.1379, -2683.1751, -2682.2119,
	 -2681.2483, -2680.2842, -2679.3196, -2678.3547, -2677.3893, -2676.4235, -2675.4572, -2674.4905, -2673.5233, -2672.5558,
	 -2671.5877, -2670.6193, -2669.6504, -2668.6811, -2667.7113, -2666.7411, -2665.7705, -2664.7994, -2663.8279, -2662.8559,
	 -2661.8836, -2660.9107, -2659.9375, -2658.9638, -2657.9896, -2657.015, -2656.04, -2655.0645, -2654.0886, -2653.1123,
	 -2652.1355, -2651.1583, -2650.1807, -2649.2026, -2648.224, -2647.245, -2646.2656, -2645.2858, -2644.3054, -2643.3247,
	 -2642.3435, -2641.3619, -2640.3798, -2639.3973, -2638.4144, -2637.431, -2636.4471, -2635.4628, -2634.4781, -2633.493,
	 -2632.5074, -2631.5213, -2630.5348, -2629.5479, -2628.5605, -2627.5727, -2626.5844, -2625.5957, -2624.6065, -2623.6169,
	 -2622.6269, -2621.6364, -2620.6454, -2619.6541, -2618.6622, -2617.67, -2616.6772, -2615.6841, -2614.6905, -2613.6964,
	 -2612.7019, -2611.707, -2610.7116, -2609.7157, -2608.7194, -2607.7227, -2606.7255, -2605.7279, -2604.7298, -2603.7313,
	 -2602.7323, -2601.7329, -2600.733, -2599.7327, -2598.7319, -2597.7307, -2596.7291, -2595.7269, -2594.7244, -2593.7214,
	 -2592.7179, -2591.714, -2590.7097, -2589.7048, -2588.6996, -2587.6939, -2586.6877, -2585.6811, -2584.674, -2583.6665,
	 -2582.6586, -2581.6502, -2580.6413, -2579.632, -2578.6222, -2577.612, -2576.6013, -2575.5902, -2574.5786, -2573.5666,
	 -2572.5541, -2571.5412, -2570.5278, -2569.514, -2568.4997, -2567.4849, -2566.4697, -2565.4541, -2564.438, -2563.4214,
	 -2562.4044, -2561.3869, -2560.369, -2559.3506, -2558.3318, -2557.3125, -2556.2928, -2555.2726, -2554.2519, -2553.2308,
	 -2552.2093, -2551.1872, -2550.1648, -2549.1418, -2548.1184, -2547.0946, -2546.0703, -2545.0456, -2544.0203, -2542.9947,
	 -2541.9685, -2540.942, -2539.9149, -2538.8874, -2537.8595, -2536.8311, -2535.8022, -2534.7729, -2533.7431, -2532.7128,
	 -2531.6821, -2530.6509, -2529.6193, -2528.5872, -2527.5547, -2526.5217, -2525.4882, -2524.4543, -2523.4199, -2522.3851,
	 -2521.3498, -2520.314, -2519.2778, -2518.2411, -2517.204, -2516.1664, -2515.1283, -2514.0898, -2513.0508, -2512.0114,
	 -2510.9715, -2509.9311, -2508.8903, -2507.849, -2506.8072, -2505.765, -2504.7223, -2503.6792, -2502.6356, -2501.5915,
	 -2500.547, -2499.502, -2498.4565, -2497.4106, -2496.3642, -2495.3174, -2494.2701, -2493.2223, -2492.1741, -2491.1254,
	 -2490.0762, -2489.0266, -2487.9765, -2486.9259, -2485.8749, -2484.8234, -2483.7714, -2482.719, -2481.6661, -2480.6128,
	 -2479.5589, -2478.5046, -2477.4499, -2476.3947, -2475.339, -2474.2828, -2473.2262, -2472.1691, -2471.1116, -2470.0536,
	 -2468.9951, -2467.9361, -2466.8767, -2465.8168, -2464.7565, -2463.6956, -2462.6343, -2461.5726, -2460.5104, -2459.4477,
	 -2458.3845, -2457.3209, -2456.2568, -2455.1922, -2454.1271, -2453.0616, -2451.9956, -2450.9292, -2449.8623, -2448.7949,
	 -2447.727, -2446.6587, -2445.5899, -2444.5206, -2443.4509, -2442.3807, -2441.31, -2440.2388, -2439.1672, -2438.0951,
	 -2437.0226, -2435.9495, -2434.876, -2433.802, -2432.7276, -2431.6526, -2430.5772, -2429.5014, -2428.425, -2427.3482,
	 -2426.2709, -2425.1932, -2424.1149, -2423.0362, -2421.957, -2420.8774, -2419.7973, -2418.7167, -2417.6356, -2416.554,
	 -2415.472, -2414.3895, -2413.3066, -2412.2231, -2411.1392, -2410.0548, -2408.9699, -2407.8846, -2406.7988, -2405.7125,
	 -2404.6257, -2403.5385, -2402.4508, -2401.3626, -2400.2739, -2399.1847, -2398.0951, -2397.005, -2395.9144, -2394.8234,
	 -2393.7319, -2392.6399, -2391.5474, -2390.4544, -2389.361, -2388.2671, -2387.1727, -2386.0778, -2384.9825, -2383.8867,
	 -2382.7904, -2381.6936, -2380.5963, -2379.4986, -2378.4004, -2377.3017, -2376.2025, -2375.1029, -2374.0027, -2372.9021,
	 -2371.8011, -2370.6995, -2369.5974, -2368.4949, -2367.3919, -2366.2884, -2365.1845, -2364.08, -2362.9751, -2361.8697,
	 -2360.7638, -2359.6575, -2358.5506, -2357.4433, -2356.3355, -2355.2272, -2354.1185, -2353.0092, -2351.8995, -2350.7893,
	 -2349.6786, -2348.5674, -2347.4558, -2346.3436, -2345.231, -2344.1179, -2343.0043, -2341.8903, -2340.7757, -2339.6607,
	 -2338.5452, -2337.4292, -2336.3127, -2335.1958, -2334.0783, -2332.9604, -2331.842, -2330.7231, -2329.6037, -2328.4839,
	 -2327.3636, -2326.2427, -2325.1214, -2323.9996, -2322.8774, -2321.7546, -2320.6313, -2319.5076, -2318.3834, -2317.2587,
	 -2316.1335, -2315.0079, -2313.8817, -2312.7551, -2311.6279, -2310.5003, -2309.3722, -2308.2437, -2307.1146, -2305.985,
	 -2304.855, -2303.7245, -2302.5935, -2301.462, -2300.33, -2299.1975, -2298.0646, -2296.9311, -2295.7972, -2294.6628,
	 -2293.5279, -2292.3925, -2291.2566, -2290.1203, -2288.9834, -2287.8461, -2286.7083, -2285.57, -2284.4312, -2283.2919,
	 -2282.1521, -2281.0118, -2279.8711, -2278.7298, -2277.5881, -2276.4459, -2275.3032, -2274.16, -2273.0163, -2271.8721,
	 -2270.7275, -2269.5823, -2268.4367, -2267.2906, -2266.144, -2264.9969, -2263.8493, -2262.7012, -2261.5526, -2260.4035,
	 -2259.254, -2258.1039, -2256.9534, -2255.8024, -2254.6509, -2253.4989, -2252.3464, -2251.1934, -2250.0399, -2248.8859,
	 -2247.7315, -2246.5765, -2245.4211, -2244.2652, -2243.1087, -2241.9518, -2240.7944, -2239.6365, -2238.4781, -2237.3193,
	 -2236.1599, -2235, -2233.8397, -2232.6788, -2231.5175, -2230.3557, -2229.1933, -2228.0305, -2226.8672, -2225.7034,
	 -2224.5391, -2223.3743, -2222.2091, -2221.0433, -2219.877, -2218.7103, -2217.543, -2216.3753, -2215.207, -2214.0383,
	 -2212.8691, -2211.6994, -2210.5292, -2209.3585, -2208.1873, -2207.0156, -2205.8434, -2204.6707, -2203.4975, -2202.3239,
	 -2201.1497, -2199.975, -2198.7999, -2197.6242, -2196.4481, -2195.2715, -2194.0943, -2192.9167, -2191.7386, -2190.56,
	 -2189.3809, -2188.2013, -2187.0212, -2185.8406, -2184.6595, -2183.4779, -2182.2958, -2181.1132, -2179.9302, -2178.7466,
	 -2177.5625, -2176.378, -2175.1929, -2174.0074, -2172.8213, -2171.6348, -2170.4477, -2169.2602, -2168.0722, -2166.8836,
	 -2165.6946, -2164.5051, -2163.3151, -2162.1246, -2160.9336, -2159.742, -2158.55, -2157.3575, -2156.1645, -2154.971,
	 -2153.777, -2152.5826, -2151.3876, -2150.1921, -2148.9961, -2147.7996, -2146.6026, -2145.4052, -2144.2072, -2143.0087,
	 -2141.8097, -2140.6103, -2139.4103, -2138.2098, -2137.0089, -2135.8074, -2134.6055, -2133.403, -2132.2001, -2130.9966,
	 -2129.7926, -2128.5882, -2127.3833, -2126.1778, -2124.9719, -2123.7654, -2122.5585, -2121.351, -2120.1431, -2118.9346,
	 -2117.7257, -2116.5163, -2115.3063, -2114.0959, -2112.885, -2111.6735, -2110.4616, -2109.2492, -2108.0362, -2106.8228,
	 -2105.6089, -2104.3944, -2103.1795, -2101.9641, -2100.7481, -2099.5317, -2098.3148, -2097.0973, -2095.8794, -2094.661,
	 -2093.442, -2092.2226, -2091.0027, -2089.7823, -2088.5613, -2087.3399, -2086.118, -2084.8955, -2083.6726, -2082.4492,
	 -2081.2252, -2080.0008, -2078.7759, -2077.5504, -2076.3245, -2075.0981, -2073.8711, -2072.6437, -2071.4157, -2070.1873,
	 -2068.9584, -2067.7289, -2066.499, -2065.2685, -2064.0376, -2062.8061, -2061.5742, -2060.3417, -2059.1088, -2057.8753,
	 -2056.6414, -2055.4069, -2054.172, -2052.9365, -2051.7006, -2050.4641, -2049.2271, -2047.9897, -2046.7517, -2045.5132,
	 -2044.2743, -2043.0348, -2041.7948, -2040.5544, -2039.3134, -2038.0719, -2036.8299, -2035.5874, -2034.3445, -2033.101,
	 -2031.857, -2030.6125, -2029.3675, -2028.122, -2026.876, -2025.6295, -2024.3825, -2023.135, -2021.887, -2020.6385,
	 -2019.3895, -2018.14, -2016.89, -2015.6395, -2014.3885, -2013.1369, -2011.8849, -2010.6324, -2009.3794, -2008.1258,
	 -2006.8718, -2005.6173, -2004.3622, -2003.1067, -2001.8507, -2000.5941, -1999.3371, -1998.0795, -1996.8215, -1995.5629,
	 -1994.3039, -1993.0443, -1991.7843, -1990.5237, -1989.2626, -1988.0011, -1986.739, -1985.4764, -1984.2133, -1982.9497,
	 -1981.6857, -1980.4211, -1979.156, -1977.8904, -1976.6243, -1975.3577, -1974.0906, -1972.823, -1971.5549, -1970.2863,
	 -1969.0172, -1967.7476, -1966.4775, -1965.2068, -1963.9357, -1962.6641, -1961.392, -1960.1193, -1958.8462, -1957.5726,
	 -1956.2984, -1955.0238, -1953.7486, -1952.473, -1951.1968, -1949.9202, -1948.643, -1947.3654, -1946.0872, -1944.8085,
	 -1943.5294, -1942.2497, -1940.9695, -1939.6889, -1938.4077, -1937.126, -1935.8438, -1934.5611, -1933.2779, -1931.9943,
	 -1930.7101, -1929.4254, -1928.1402, -1926.8545, -1925.5682, -1924.2815, -1922.9943, -1921.7066, -1920.4184, -1919.1297,
	 -1917.8405, -1916.5507, -1915.2605, -1913.9698, -1912.6785, -1911.3868, -1910.0946, -1908.8018, -1907.5086, -1906.2148,
	 -1904.9206, -1903.6258, -1902.3306, -1901.0348, -1899.7386, -1898.4418, -1897.1445, -1895.8468, -1894.5485, -1893.2497,
	 -1891.9505, -1890.6507, -1889.3504, -1888.0496, -1886.7484, -1885.4466, -1884.1443, -1882.8415, -1881.5382, -1880.2344,
	 -1878.9301, -1877.6253, -1876.32, -1875.0142, -1873.7079, -1872.4011, -1871.0938, -1869.786, -1868.4777, -1867.1689,
	 -1865.8596, -1864.5498, -1863.2395, -1861.9286, -1860.6173, -1859.3055, -1857.9932, -1856.6804, -1855.367, -1854.0532,
	 -1852.7389, -1851.4241, -1850.1087, -1848.7929, -1847.4766, -1846.1597, -1844.8424, -1843.5246, -1842.2062, -1840.8874,
	 -1839.568, -1838.2482, -1836.9279, -1835.607, -1834.2857, -1832.9638, -1831.6415, -1830.3187, -1828.9953, -1827.6715,
	 -1826.3471, -1825.0223, -1823.6969, -1822.3711, -1821.0447, -1819.7179, -1818.3905, -1817.0627, -1815.7343, -1814.4055,
	 -1813.0761, -1811.7463, -1810.4159, -1809.0851, -1807.7537, -1806.4219, -1805.0896, -1803.7567, -1802.4234, -1801.0895,
	 -1799.7552, -1798.4203, -1797.085, -1795.7491, -1794.4128, -1793.076, -1791.7386, -1790.4008, -1789.0624, -1787.7236,
	 -1786.3843, -1785.0444, -1783.7041, -1782.3633, -1781.022, -1779.6801, -1778.3378, -1776.995, -1775.6517, -1774.3078,
	 -1772.9635, -1771.6187, -1770.2734, -1768.9276, -1767.5813, -1766.2344, -1764.8871, -1763.5393, -1762.191, -1760.8422,
	 -1759.4929, -1758.1432, -1756.7929, -1755.4421, -1754.0908, -1752.739, -1751.3867, -1750.034, -1748.6807, -1747.3269,
	 -1745.9727, -1744.6179, -1743.2626, -1741.9069, -1740.5506, -1739.1939, -1737.8366, -1736.4789, -1735.1207, -1733.7619,
	 -1732.4027, -1731.043, -1729.6828, -1728.3221, -1726.9609, -1725.5992, -1724.237, -1722.8743, -1721.5111, -1720.1474,
	 -1718.7832, -1717.4186, -1716.0534, -1714.6877, -1713.3216, -1711.9549, -1710.5878, -1709.2202, -1707.852, -1706.4834,
	 -1705.1143, -1703.7447, -1702.3746, -1701.004, -1699.6329, -1698.2613, -1696.8892, -1695.5166, -1694.1436, -1692.77,
	 -1691.396, -1690.0214, -1688.6464, -1687.2709, -1685.8948, -1684.5183, -1683.1413, -1681.7638, -1680.3858, -1679.0074,
	 -1677.6284, -1676.2489, -1674.869, -1673.4885, -1672.1076, -1670.7261, -1669.3442, -1667.9618, -1666.5789, -1665.1955,
	 -1663.8116, -1662.4273, -1661.0424, -1659.6571, -1658.2712, -1656.8849, -1655.4981, -1654.1108, -1652.723, -1651.3347,
	 -1649.9459, -1648.5566, -1647.1669, -1645.7766, -1644.3859, -1642.9947, -1641.6029, -1640.2107, -1638.818, -1637.4249,
	 -1636.0312, -1634.6371, -1633.2424, -1631.8473, -1630.4517, -1629.0556, -1627.659, -1626.2619, -1624.8643, -1623.4663,
	 -1622.0678, -1620.6687, -1619.2692, -1617.8692, -1616.4687, -1615.0678, -1613.6663, -1612.2644, -1610.862, -1609.459,
	 -1608.0556, -1606.6518, -1605.2474, -1603.8426, -1602.4372, -1601.0314, -1599.6251, -1598.2183, -1596.811, -1595.4033,
	 -1593.995, -1592.5863, -1591.1771, -1589.7674, -1588.3573, -1586.9466, -1585.5355, -1584.1238, -1582.7117, -1581.2992,
	 -1579.8861, -1578.4725, -1577.0585, -1575.644, -1574.229, -1572.8135, -1571.3976, -1569.9811, -1568.5642, -1567.1468,
	 -1565.7289, -1564.3106, -1562.8917, -1561.4724, -1560.0526, -1558.6323, -1557.2116, -1555.7903, -1554.3686, -1552.9464,
	 -1551.5237, -1550.1006, -1548.6769, -1547.2528, -1545.8282, -1544.4032, -1542.9776, -1541.5516, -1540.1251, -1538.6981,
	 -1537.2707, -1535.8427, -1534.4143, -1532.9854, -1531.5561, -1530.1262, -1528.6959, -1527.2651, -1525.8339, -1524.4021,
	 -1522.9699, -1521.5372, -1520.1041, -1518.6704, -1517.2363, -1515.8017, -1514.3666, -1512.9311, -1511.4951, -1510.0586,
	 -1508.6216, -1507.1842, -1505.7463, -1504.3079, -1502.8691, -1501.4298, -1499.99, -1498.5497, -1497.1089, -1495.6677,
	 -1494.2261, -1492.7839, -1491.3413, -1489.8982, -1488.4546, -1487.0106, -1485.5661, -1484.1211, -1482.6756, -1481.2297,
	 -1479.7833, -1478.3365, -1476.8892, -1475.4414, -1473.9931, -1472.5444, -1471.0952, -1469.6455, -1468.1954, -1466.7448,
	 -1465.2937, -1463.8422, -1462.3902, -1460.9377, -1459.4847, -1458.0313, -1456.5775, -1455.1231, -1453.6683, -1452.2131,
	 -1450.7573, -1449.3011, -1447.8445, -1446.3874, -1444.9298, -1443.4717, -1442.0132, -1440.5542, -1439.0948, -1437.6349,
	 -1436.1745, -1434.7137, -1433.2524, -1431.7906, -1430.3284, -1428.8657, -1427.4025, -1425.9389, -1424.4749, -1423.0103,
	 -1421.5454, -1420.0799, -1418.614, -1417.1476, -1415.6808, -1414.2135, -1412.7458, -1411.2776, -1409.8089, -1408.3398,
	 -1406.8702, -1405.4001, -1403.9296, -1402.4587, -1400.9873, -1399.5154, -1398.0431, -1396.5703, -1395.0971, -1393.6234,
	 -1392.1492, -1390.6746, -1389.1995, -1387.724, -1386.248, -1384.7716, -1383.2947, -1381.8174, -1380.3396, -1378.8614,
	 -1377.3827, -1375.9035, -1374.4239, -1372.9439, -1371.4634, -1369.9824, -1368.501, -1367.0191, -1365.5368, -1364.054,
	 -1362.5708, -1361.0872, -1359.603, -1358.1185, -1356.6335, -1355.148, -1353.6621, -1352.1757, -1350.6889, -1349.2016,
	 -1347.7139, -1346.2258, -1344.7372, -1343.2481, -1341.7586, -1340.2687, -1338.7783, -1337.2875, -1335.7962, -1334.3044,
	 -1332.8123, -1331.3196, -1329.8266, -1328.3331, -1326.8391, -1325.3447, -1323.8499, -1322.3546, -1320.8589, -1319.3627,
	 -1317.8661, -1316.369, -1314.8715, -1313.3736, -1311.8752, -1310.3764, -1308.8771, -1307.3774, -1305.8773, -1304.3767,
	 -1302.8757, -1301.3742, -1299.8723, -1298.37, -1296.8672, -1295.364, -1293.8603, -1292.3562, -1290.8517, -1289.3467,
	 -1287.8413, -1286.3355, -1284.8292, -1283.3225, -1281.8154, -1280.3078, -1278.7998, -1277.2913, -1275.7824, -1274.2731,
	 -1272.7634, -1271.2532, -1269.7425, -1268.2315, -1266.72, -1265.2081, -1263.6957, -1262.183, -1260.6697, -1259.1561,
	 -1257.642, -1256.1275, -1254.6126, -1253.0972, -1251.5814, -1250.0652, -1248.5486, -1247.0315, -1245.514, -1243.996,
	 -1242.4777, -1240.9589, -1239.4397, -1237.92, -1236.4, -1234.8795, -1233.3586, -1231.8372, -1230.3154, -1228.7933,
	 -1227.2706, -1225.7476, -1224.2241, -1222.7002, -1221.1759, -1219.6512, -1218.126, -1216.6005, -1215.0745, -1213.548,
	 -1212.0212, -1210.4939, -1208.9663, -1207.4382, -1205.9096, -1204.3807, -1202.8513, -1201.3216, -1199.7914, -1198.2608,
	 -1196.7297, -1195.1983, -1193.6664, -1192.1341, -1190.6014, -1189.0683, -1187.5348, -1186.0009, -1184.4665, -1182.9317,
	 -1181.3965, -1179.8609, -1178.3249, -1176.7885, -1175.2517, -1173.7144, -1172.1768, -1170.6387, -1169.1002, -1167.5613,
	 -1166.022, -1164.4823, -1162.9422, -1161.4016, -1159.8607, -1158.3193, -1156.7776, -1155.2354, -1153.6928, -1152.1499,
	 -1150.6065, -1149.0627, -1147.5185, -1145.9739, -1144.4289, -1142.8834, -1141.3376, -1139.7914, -1138.2448, -1136.6977,
	 -1135.1503, -1133.6024, -1132.0542, -1130.5056, -1128.9565, -1127.4071, -1125.8572, -1124.307, -1122.7563, -1121.2053,
	 -1119.6538, -1118.102, -1116.5498, -1114.9971, -1113.4441, -1111.8906, -1110.3368, -1108.7826, -1107.228, -1105.6729,
	 -1104.1175, -1102.5617, -1101.0055, -1099.4489, -1097.8919, -1096.3345, -1094.7767, -1093.2186, -1091.66, -1090.101,
	 -1088.5417, -1086.9819, -1085.4218, -1083.8613, -1082.3004, -1080.7391, -1079.1774, -1077.6153, -1076.0528, -1074.49,
	 -1072.9267, -1071.3631, -1069.7991, -1068.2347, -1066.6699, -1065.1047, -1063.5392, -1061.9732, -1060.4069, -1058.8402,
	 -1057.2731, -1055.7056, -1054.1377, -1052.5695, -1051.0009, -1049.4319, -1047.8625, -1046.2927, -1044.7226, -1043.152,
	 -1041.5811, -1040.0099, -1038.4382, -1036.8661, -1035.2937, -1033.7209, -1032.1478, -1030.5742, -1029.0003, -1027.426,
	 -1025.8513, -1024.2763, -1022.7008, -1021.125, -1019.5489, -1017.9723, -1016.3954, -1014.8181, -1013.2405, -1011.6624,
	 -1010.084, -1008.5052, -1006.9261, -1005.3466, -1003.7667, -1002.1865, -1000.6058, -999.0249, -997.4435, -995.8618,
	 -994.2797, -992.6972, -991.1144, -989.5312, -987.9477, -986.3638, -984.7795, -983.1949, -981.6099, -980.0245,
	 -978.4388, -976.8527, -975.2663, -973.6794, -972.0923, -970.5047, -968.9169, -967.3286, -965.74, -964.151,
	 -962.5617, -960.9721, -959.382, -957.7916, -956.2009, -954.6098, -953.0183, -951.4265, -949.8344, -948.2418,
	 -946.649, -945.0558, -943.4622, -941.8683, -940.274, -938.6794, -937.0844, -935.4891, -933.8934, -932.2974,
	 -930.701, -929.1043, -927.5072, -925.9098, -924.312, -922.7139, -921.1155, -919.5167, -917.9175, -916.3181,
	 -914.7182, -913.1181, -911.5176, -909.9167, -908.3155, -906.714, -905.1121, -903.5099, -901.9073, -900.3044,
	 -898.7012, -897.0976, -895.4937, -893.8895, -892.2849, -890.68, -889.0747, -887.4691, -885.8632, -884.2569,
	 -882.6503, -881.0434, -879.4361, -877.8286, -876.2206, -874.6124, -873.0038, -871.3949, -869.7856, -868.1761,
	 -866.5662, -864.9559, -863.3454, -861.7345, -860.1233, -858.5117, -856.8999, -855.2877, -853.6751, -852.0623,
	 -850.4491, -848.8357, -847.2218, -845.6077, -843.9933, -842.3785, -840.7634, -839.148, -837.5322, -835.9162,
	 -834.2998, -832.6831, -831.0661, -829.4488, -827.8311, -826.2132, -824.5949, -822.9763, -821.3574, -819.7382,
	 -818.1186, -816.4988, -814.8786, -813.2582, -811.6374, -810.0163, -808.3949, -806.7732, -805.1512, -803.5288,
	 -801.9062, -800.2832, -798.66, -797.0364, -795.4126, -793.7884, -792.1639, -790.5391, -788.914, -787.2886,
	 -785.6629, -784.037, -782.4107, -780.7841, -779.1572, -777.53, -775.9025, -774.2746, -772.6466, -771.0182,
	 -769.3895, -767.7605, -766.1312, -764.5016, -762.8717, -761.2415, -759.6111, -757.9803, -756.3492, -754.7179,
	 -753.0863, -751.4543, -749.8221, -748.1896, -746.5568, -744.9237, -743.2903, -741.6566, -740.0227, -738.3884,
	 -736.7539, -735.1191, -733.4839, -731.8486, -730.2129, -728.5769, -726.9407, -725.3041, -723.6673, -722.0302,
	 -720.3929, -718.7552, -717.1173, -715.4791, -713.8406, -712.2018, -710.5628, -708.9234, -707.2838, -705.644,
	 -704.0038, -702.3634, -700.7227, -699.0817, -697.4404, -695.7989, -694.1571, -692.515, -690.8727, -689.2301,
	 -687.5872, -685.9441, -684.3006, -682.657, -681.013, -679.3688, -677.7243, -676.0795, -674.4345, -672.7892,
	 -671.1437, -669.4979, -667.8518, -666.2055, -664.5589, -662.912, -661.2649, -659.6175, -657.9699, -656.322,
	 -654.6738, -653.0254, -651.3767, -649.7278, -648.0786, -646.4291, -644.7794, -643.1295, -641.4793, -639.8288,
	 -638.1781, -636.5271, -634.8759, -633.2245, -631.5728, -629.9208, -628.2686, -626.6161, -624.9634, -623.3104,
	 -621.6572, -620.0038, -618.3501, -616.6961, -615.0419, -613.3875, -611.7328, -610.0779, -608.4228, -606.7674,
	 -605.1117, -603.4558, -601.7997, -600.1434, -598.4868, -596.8299, -595.1729, -593.5155, -591.858, -590.2002,
	 -588.5422, -586.884, -585.2255, -583.5668, -581.9078, -580.2486, -578.5892, -576.9296, -575.2697, -573.6096,
	 -571.9493, -570.2887, -568.6279, -566.9669, -565.3057, -563.6442, -561.9825, -560.3206, -558.6585, -556.9961,
	 -555.3335, -553.6707, -552.0077, -550.3445, -548.681, -547.0173, -545.3534, -543.6893, -542.0249, -540.3604,
	 -538.6956, -537.0306, -535.3654, -533.7, -532.0343, -530.3685, -528.7024, -527.0362, -525.3697, -523.703,
	 -522.0361, -520.369, -518.7016, -517.0341, -515.3664, -513.6984, -512.0303, -510.3619, -508.6934, -507.0246,
	 -505.3556, -503.6864, -502.0171, -500.3475, -498.6777, -497.0077, -495.3375, -493.6671, -491.9966, -490.3258,
	 -488.6548, -486.9836, -485.3123, -483.6407, -481.9689, -480.297, -478.6248, -476.9525, -475.28, -473.6072,
	 -471.9343, -470.2612, -468.5879, -466.9144, -465.2408, -463.5669, -461.8928, -460.2186, -458.5442, -456.8696,
	 -455.1948, -453.5198, -451.8446, -450.1693, -448.4938, -446.8181, -445.1422, -443.4661, -441.7898, -440.1134,
	 -438.4368, -436.76, -435.0831, -433.4059, -431.7286, -430.0511, -428.3735, -426.6956, -425.0176, -423.3394,
	 -421.6611, -419.9825, -418.3038, -416.625, -414.9459, -413.2667, -411.5874, -409.9078, -408.2281, -406.5483,
	 -404.8682, -403.188, -401.5076, -399.8271, -398.1464, -396.4656, -394.7846, -393.1034, -391.422, -389.7406,
	 -388.0589, -386.3771, -384.6951, -383.013, -381.3307, -379.6483, -377.9657, -376.2829, -374.6, -372.917,
	 -371.2338, -369.5504, -367.8669, -366.1832, -364.4994, -362.8155, -361.1314, -359.4471, -357.7627, -356.0782,
	 -354.3935, -352.7087, -351.0237, -349.3386, -347.6533, -345.9679, -344.2823, -342.5967, -340.9108, -339.2249,
	 -337.5387, -335.8525, -334.1661, -332.4796, -330.7929, -329.1062, -327.4192, -325.7322, -324.045, -322.3576,
	 -320.6702, -318.9826, -317.2949, -315.607, -313.919, -312.2309, -310.5427, -308.8543, -307.1658, -305.4772,
	 -303.7885, -302.0996, -300.4106, -298.7215, -297.0323, -295.3429, -293.6534, -291.9638, -290.2741, -288.5843,
	 -286.8943, -285.2043, -283.5141, -281.8238, -280.1333, -278.4428, -276.7521, -275.0614, -273.3705, -271.6795,
	 -269.9884, -268.2972, -266.6058, -264.9144, -263.2229, -261.5312, -259.8395, -258.1476, -256.4556, -254.7635,
	 -253.0713, -251.3791, -249.6867, -247.9942, -246.3016, -244.6089, -242.9161, -241.2232, -239.5302, -237.8371,
	 -236.1439, -234.4506, -232.7572, -231.0637, -229.3701, -227.6765, -225.9827, -224.2888, -222.5949, -220.9008,
	 -219.2067, -217.5125, -215.8182, -214.1238, -212.4293, -210.7347, -209.04, -207.3453, -205.6504, -203.9555,
	 -202.2605, -200.5654, -198.8702, -197.175, -195.4796, -193.7842, -192.0887, -190.3931, -188.6975, -187.0017,
	 -185.3059, -183.61, -181.9141, -180.218, -178.5219, -176.8257, -175.1294, -173.4331, -171.7367, -170.0402,
	 -168.3437, -166.6471, -164.9504, -163.2536, -161.5568, -159.8599, -158.163, -156.4659, -154.7689, -153.0717,
	 -151.3745, -149.6772, -147.9799, -146.2825, -144.585, -142.8875, -141.1899, -139.4923, -137.7946, -136.0969,
	 -134.3991, -132.7012, -131.0033, -129.3053, -127.6073, -125.9092, -124.2111, -122.5129, -120.8147, -119.1164,
	 -117.418, -115.7197, -114.0212, -112.3228, -110.6242, -108.9257, -107.2271, -105.5284, -103.8297, -102.131,
	 -100.4322, -98.7333, -97.0345, -95.3356, -93.6366, -91.9376, -90.2386, -88.5395, -86.8404, -85.1413,
	 -83.4421, -81.7429, -80.0437, -78.3444, -76.6451, -74.9458, -73.2464, -71.547, -69.8476, -68.1481,
	 -66.4487, -64.7491, -63.0496, -61.35, -59.6504, -57.9508, -56.2512, -54.5515, -52.8518, -51.1521,
	 -49.4524, -47.7527, -46.0529, -44.3531, -42.6533, -40.9535, -39.2536, -37.5538, -35.8539, -34.154,
	 -32.4541, -30.7542, -29.0543, -27.3543, -25.6544, -23.9544, -22.2545, -20.5545, -18.8545, -17.1545,
	 -15.4545, -13.7545, -12.0545, -10.3544, -8.6544, -6.9544, -5.2543, -3.5543, -1.8543, -0.15424,
	 1.5458, 3.2458, 4.9459, 6.6459, 8.3459, 10.046, 11.746, 13.446, 15.146, 16.846,
	 18.546, 20.246, 21.946, 23.646, 25.3459, 27.0459, 28.7458, 30.4458, 32.1457, 33.8456,
	 35.5455, 37.2453, 38.9452, 40.645, 42.3449, 44.0447, 45.7445, 47.4442, 49.144, 50.8437,
	 52.5434, 54.2431, 55.9428, 57.6424, 59.3421, 61.0416, 62.7412, 64.4408, 66.1403, 67.8398,
	 69.5392, 71.2387, 72.9381, 74.6374, 76.3368, 78.0361, 79.7354, 81.4346, 83.1338, 84.833,
	 86.5321, 88.2312, 89.9303, 91.6293, 93.3283, 95.0273, 96.7262, 98.4251, 100.1239, 101.8227,
	 103.5215, 105.2202, 106.9188, 108.6175, 110.316, 112.0146, 113.7131, 115.4115, 117.1099, 118.8082,
	 120.5065, 122.2047, 123.9029, 125.6011, 127.2992, 128.9972, 130.6952, 132.3931, 134.091, 135.7888,
	 137.4866, 139.1843, 140.8819, 142.5795, 144.277, 145.9745, 147.6719, 149.3692, 151.0665, 152.7638,
	 154.4609, 156.158, 157.855, 159.552, 161.2489, 162.9457, 164.6425, 166.3392, 168.0358, 169.7324,
	 171.4289, 173.1253, 174.8217, 176.5179, 178.2141, 179.9103, 181.6063, 183.3023, 184.9982, 186.694,
	 188.3898, 190.0854, 191.781, 193.4766, 195.172, 196.8673, 198.5626, 200.2578, 201.9529, 203.6479,
	 205.3429, 207.0377, 208.7325, 210.4272, 212.1218, 213.8163, 215.5107, 217.2051, 218.8993, 220.5934,
	 222.2875, 223.9815, 225.6754, 227.3691, 229.0628, 230.7564, 232.4499, 234.1433, 235.8367, 237.5299,
	 239.223, 240.916, 242.6089, 244.3017, 245.9944, 247.6871, 249.3796, 251.072, 252.7643, 254.4565,
	 256.1486, 257.8406, 259.5325, 261.2243, 262.9159, 264.6075, 266.2989, 267.9903, 269.6815, 271.3727,
	 273.0637, 274.7546, 276.4454, 278.136, 279.8266, 281.517, 283.2074, 284.8976, 286.5877, 288.2777,
	 289.9675, 291.6573, 293.3469, 295.0364, 296.7258, 298.415, 300.1042, 301.7932, 303.4821, 305.1708,
	 306.8595, 308.548, 310.2364, 311.9246, 313.6127, 315.3008, 316.9886, 318.6764, 320.364, 322.0515,
	 323.7388, 325.426, 327.1131, 328.8001, 330.4869, 332.1736, 333.8601, 335.5465, 337.2328, 338.9189,
	 340.6049, 342.2908, 343.9765, 345.6621, 347.3475, 349.0328, 350.7179, 352.4029, 354.0878, 355.7725,
	 357.4571, 359.1415, 360.8258, 362.5099, 364.1939, 365.8777, 367.5614, 369.245, 370.9283, 372.6116,
	 374.2946, 375.9776, 377.6604, 379.343, 381.0254, 382.7077, 384.3899, 386.0719, 387.7537, 389.4354,
	 391.1169, 392.7983, 394.4795, 396.1606, 397.8414, 399.5222, 401.2027, 402.8831, 404.5634, 406.2434,
	 407.9233, 409.6031, 411.2826, 412.962, 414.6413, 416.3203, 417.9992, 419.678, 421.3565, 423.0349,
	 424.7131, 426.3912, 428.069, 429.7467, 431.4242, 433.1016, 434.7788, 436.4557, 438.1326, 439.8092,
	 441.4857, 443.1619, 444.8381, 446.514, 448.1897, 449.8653, 451.5407, 453.2158, 454.8909, 456.5657,
	 458.2403, 459.9148, 461.5891, 463.2631, 464.937, 466.6108, 468.2843, 469.9576, 471.6307, 473.3037,
	 474.9765, 476.649, 478.3214, 479.9936, 481.6656, 483.3374, 485.009, 486.6804, 488.3516, 490.0226,
	 491.6934, 493.364, 495.0345, 496.7047, 498.3747, 500.0445, 501.7141, 503.3835, 505.0528, 506.7218,
	 508.3906, 510.0592, 511.7276, 513.3958, 515.0637, 516.7315, 518.3991, 520.0664, 521.7336, 523.4005,
	 525.0673, 526.7338, 528.4001, 530.0662, 531.7321, 533.3978, 535.0632, 536.7285, 538.3935, 540.0583,
	 541.7229, 543.3873, 545.0515, 546.7154, 548.3791, 550.0426, 551.7059, 553.369, 555.0318, 556.6945,
	 558.3569, 560.019, 561.681, 563.3427, 565.0042, 566.6655, 568.3266, 569.9874, 571.648, 573.3084,
	 574.9685, 576.6284, 578.2881, 579.9475, 581.6068, 583.2658, 584.9245, 586.583, 588.2413, 589.8994,
	 591.5572, 593.2148, 594.8722, 596.5293, 598.1862, 599.8428, 601.4992, 603.1554, 604.8113, 606.467,
	 608.1224, 609.7776, 611.4326, 613.0873, 614.7418, 616.396, 618.05, 619.7037, 621.3572, 623.0105,
	 624.6635, 626.3162, 627.9687, 629.621, 631.273, 632.9248, 634.5763, 636.2276, 637.8786, 639.5293,
	 641.1798, 642.8301, 644.4801, 646.1298, 647.7793, 649.4285, 651.0775, 652.7262, 654.3747, 656.0229,
	 657.6709, 659.3186, 660.966, 662.6132, 664.2601, 665.9067, 667.5531, 669.1992, 670.8451, 672.4907,
	 674.136, 675.7811, 677.4259, 679.0704, 680.7147, 682.3587, 684.0024, 685.6459, 687.2891, 688.932,
	 690.5747, 692.2171, 693.8592, 695.501, 697.1426, 698.7839, 700.4249, 702.0657, 703.7062, 705.3464,
	 706.9863, 708.6259, 710.2653, 711.9044, 713.5432, 715.1818, 716.82, 718.458, 720.0957, 721.7332,
	 723.3703, 725.0072, 726.6437, 728.28, 729.9161, 731.5518, 733.1872, 734.8224, 736.4573, 738.0918,
	 739.7261, 741.3602, 742.9939, 744.6273, 746.2605, 747.8933, 749.5259, 751.1582, 752.7902, 754.4219,
	 756.0533, 757.6844, 759.3152, 760.9457, 762.5759, 764.2059, 765.8355, 767.4649, 769.0939, 770.7226,
	 772.3511, 773.9793, 775.6071, 777.2347, 778.8619, 780.4889, 782.1155, 783.7419, 785.3679, 786.9937,
	 788.6191, 790.2443, 791.8691, 793.4936, 795.1179, 796.7418, 798.3654, 799.9887, 801.6117, 803.2344,
	 804.8568, 806.4789, 808.1007, 809.7221, 811.3433, 812.9641, 814.5846, 816.2048, 817.8247, 819.4443,
	 821.0636, 822.6826, 824.3012, 825.9196, 827.5376, 829.1553, 830.7727, 832.3897, 834.0065, 835.6229,
	 837.239, 838.8548, 840.4703, 842.0854, 843.7003, 845.3148, 846.929, 848.5428, 850.1564, 851.7696,
	 853.3825, 854.9951, 856.6073, 858.2193, 859.8309, 861.4421, 863.0531, 864.6637, 866.274, 867.884,
	 869.4936, 871.1029, 872.7119, 874.3205, 875.9288, 877.5368, 879.1445, 880.7518, 882.3588, 883.9654,
	 885.5718, 887.1777, 888.7834, 890.3887, 891.9937, 893.5983, 895.2026, 896.8066, 898.4102, 900.0135,
	 901.6165, 903.2191, 904.8214, 906.4233, 908.0249, 909.6262, 911.2271, 912.8277, 914.4279, 916.0278,
	 917.6273, 919.2265, 920.8254, 922.4239, 924.0221, 925.6199, 927.2174, 928.8145, 930.4113, 932.0077,
	 933.6038, 935.1995, 936.7949, 938.39, 939.9847, 941.579, 943.173, 944.7666, 946.3599, 947.9528,
	 949.5454, 951.1376, 952.7295, 954.321, 955.9122, 957.503, 959.0935, 960.6836, 962.2733, 963.8627,
	 965.4517, 967.0404, 968.6287, 970.2167, 971.8042, 973.3915, 974.9784, 976.5649, 978.151, 979.7368,
	 981.3222, 982.9073, 984.492, 986.0763, 987.6603, 989.2439, 990.8272, 992.4101, 993.9926, 995.5747,
	 997.1565, 998.7379, 1000.319, 1001.8997, 1003.48, 1005.0599, 1006.6395, 1008.2187, 1009.7976, 1011.376,
	 1012.9541, 1014.5319, 1016.1092, 1017.6862, 1019.2628, 1020.8391, 1022.4149, 1023.9904, 1025.5655, 1027.1403,
	 1028.7147, 1030.2886, 1031.8623, 1033.4355, 1035.0084, 1036.5809, 1038.153, 1039.7247, 1041.2961, 1042.867,
	 1044.4376, 1046.0078, 1047.5777, 1049.1471, 1050.7162, 1052.2849, 1053.8532, 1055.4211, 1056.9887, 1058.5559,
	 1060.1226, 1061.689, 1063.2551, 1064.8207, 1066.3859, 1067.9508, 1069.5153, 1071.0793, 1072.643, 1074.2064,
	 1075.7693, 1077.3318, 1078.894, 1080.4557, 1082.0171, 1083.5781, 1085.1387, 1086.6989, 1088.2587, 1089.8181,
	 1091.3771, 1092.9358, 1094.494, 1096.0519, 1097.6093, 1099.1664, 1100.7231, 1102.2794, 1103.8352, 1105.3907,
	 1106.9458, 1108.5005, 1110.0548, 1111.6087, 1113.1622, 1114.7153, 1116.2681, 1117.8204, 1119.3723, 1120.9238,
	 1122.4749, 1124.0256, 1125.576, 1127.1259, 1128.6754, 1130.2245, 1131.7732, 1133.3215, 1134.8695, 1136.417,
	 1137.9641, 1139.5108, 1141.0571, 1142.603, 1144.1485, 1145.6935, 1147.2382, 1148.7825, 1150.3264, 1151.8698,
	 1153.4129, 1154.9555, 1156.4978, 1158.0396, 1159.581, 1161.1221, 1162.6627, 1164.2029, 1165.7427, 1167.282,
	 1168.821, 1170.3596, 1171.8977, 1173.4354, 1174.9728, 1176.5097, 1178.0462, 1179.5823, 1181.1179, 1182.6532,
	 1184.188, 1185.7225, 1187.2565, 1188.7901, 1190.3233, 1191.8561, 1193.3884, 1194.9204, 1196.4519, 1197.983,
	 1199.5137, 1201.0439, 1202.5738, 1204.1032, 1205.6322, 1207.1608, 1208.689, 1210.2168, 1211.7441, 1213.271,
	 1214.7975, 1216.3236, 1217.8493, 1219.3745, 1220.8993, 1222.4237, 1223.9477, 1225.4712, 1226.9943, 1228.517,
	 1230.0393, 1231.5611, 1233.0825, 1234.6035, 1236.1241, 1237.6443, 1239.164, 1240.6833, 1242.2021, 1243.7206,
	 1245.2386, 1246.7562, 1248.2733, 1249.7901, 1251.3064, 1252.8222, 1254.3377, 1255.8527, 1257.3673, 1258.8814,
	 1260.3951, 1261.9084, 1263.4213, 1264.9337, 1266.4457, 1267.9573, 1269.4684, 1270.9791, 1272.4894, 1273.9992,
	 1275.5086, 1277.0176, 1278.5261, 1280.0342, 1281.5418, 1283.0491, 1284.5559, 1286.0622, 1287.5681, 1289.0736,
	 1290.5787, 1292.0833, 1293.5874, 1295.0912, 1296.5945, 1298.0973, 1299.5997, 1301.1017, 1302.6033, 1304.1044,
	 1305.605, 1307.1053, 1308.605, 1310.1044, 1311.6033, 1313.1017, 1314.5998, 1316.0973, 1317.5945, 1319.0912,
	 1320.5874, 1322.0832, 1323.5786, 1325.0735, 1326.568, 1328.062, 1329.5556, 1331.0488, 1332.5415, 1334.0337,
	 1335.5255, 1337.0169, 1338.5078, 1339.9983, 1341.4883, 1342.9779, 1344.467, 1345.9557, 1347.4439, 1348.9317,
	 1350.4191, 1351.906, 1353.3924, 1354.8784, 1356.364, 1357.8491, 1359.3337, 1360.8179, 1362.3017, 1363.7849,
	 1365.2678, 1366.7502, 1368.2321, 1369.7136, 1371.1947, 1372.6753, 1374.1554, 1375.6351, 1377.1143, 1378.5931,
	 1380.0714, 1381.5493, 1383.0267, 1384.5037, 1385.9802, 1387.4562, 1388.9318, 1390.407, 1391.8817, 1393.3559,
	 1394.8297, 1396.303, 1397.7759, 1399.2483, 1400.7202, 1402.1917, 1403.6628, 1405.1334, 1406.6035, 1408.0731,
	 1409.5424, 1411.0111, 1412.4794, 1413.9472, 1415.4146, 1416.8815, 1418.348, 1419.814, 1421.2795, 1422.7446,
	 1424.2092, 1425.6733, 1427.137, 1428.6002, 1430.063, 1431.5253, 1432.9872, 1434.4485, 1435.9095, 1437.3699,
	 1438.8299, 1440.2894, 1441.7485, 1443.2071, 1444.6652, 1446.1229, 1447.5801, 1449.0369, 1450.4931, 1451.949,
	 1453.4043, 1454.8592, 1456.3136, 1457.7676, 1459.2211, 1460.6741, 1462.1266, 1463.5787, 1465.0303, 1466.4815,
	 1467.9322, 1469.3824, 1470.8322, 1472.2814, 1473.7303, 1475.1786, 1476.6265, 1478.0739, 1479.5208, 1480.9673,
	 1482.4133, 1483.8588, 1485.3039, 1486.7485, 1488.1926, 1489.6363, 1491.0795, 1492.5222, 1493.9644, 1495.4062,
	 1496.8475, 1498.2883, 1499.7287, 1501.1685, 1502.6079, 1504.0469, 1505.4853, 1506.9233, 1508.3609, 1509.7979,
	 1511.2345, 1512.6706, 1514.1062, 1515.5413, 1516.976, 1518.4102, 1519.844, 1521.2772, 1522.71, 1524.1423,
	 1525.5741, 1527.0055, 1528.4363, 1529.8667, 1531.2967, 1532.7261, 1534.1551, 1535.5836, 1537.0116, 1538.4391,
	 1539.8662, 1541.2928, 1542.7189, 1544.1445, 1545.5697, 1546.9944, 1548.4186, 1549.8423, 1551.2655, 1552.6883,
	 1554.1106, 1555.5324, 1556.9537, 1558.3746, 1559.7949, 1561.2148, 1562.6342, 1564.0532, 1565.4716, 1566.8896,
	 1568.3071, 1569.7241, 1571.1406, 1572.5566, 1573.9722, 1575.3873, 1576.8019, 1578.216, 1579.6296, 1581.0428,
	 1582.4555, 1583.8677, 1585.2794, 1586.6906, 1588.1013, 1589.5116, 1590.9214, 1592.3307, 1593.7395, 1595.1478,
	 1596.5556, 1597.963, 1599.3699, 1600.7763, 1602.1822, 1603.5876, 1604.9925, 1606.397, 1607.801, 1609.2044,
	 1610.6074, 1612.0099, 1613.412, 1614.8135, 1616.2146, 1617.6151, 1619.0152, 1620.4148, 1621.8139, 1623.2126,
	 1624.6107, 1626.0083, 1627.4055, 1628.8022, 1630.1984, 1631.5941, 1632.9893, 1634.384, 1635.7783, 1637.172,
	 1638.5653, 1639.9581, 1641.3504, 1642.7422, 1644.1335, 1645.5243, 1646.9146, 1648.3045, 1649.6938, 1651.0827,
	 1652.4711, 1653.859, 1655.2464, 1656.6333, 1658.0197, 1659.4056, 1660.7911, 1662.176, 1663.5605, 1664.9445,
	 1666.3279, 1667.7109, 1669.0934, 1670.4754, 1671.857, 1673.238, 1674.6185, 1675.9986, 1677.3781, 1678.7572,
	 1680.1357, 1681.5138, 1682.8914, 1684.2685, 1685.6451, 1687.0212, 1688.3968, 1689.772, 1691.1466, 1692.5207,
	 1693.8944, 1695.2675, 1696.6402, 1698.0124, 1699.384, 1700.7552, 1702.1259, 1703.4961, 1704.8658, 1706.235,
	 1707.6037, 1708.9719, 1710.3397, 1711.7069, 1713.0736, 1714.4399, 1715.8056, 1717.1709, 1718.5356, 1719.8999,
	 1721.2637, 1722.627, 1723.9897, 1725.352, 1726.7138, 1728.0751, 1729.4359, 1730.7962, 1732.156, 1733.5154,
	 1734.8742, 1736.2325, 1737.5903, 1738.9477, 1740.3045, 1741.6608, 1743.0167, 1744.372, 1745.7269, 1747.0812,
	 1748.4351, 1749.7884, 1751.1413, 1752.4937, 1753.8455, 1755.1969, 1756.5478, 1757.8982, 1759.2481, 1760.5974,
	 1761.9463, 1763.2947, 1764.6426, 1765.99, 1767.3369, 1768.6833, 1770.0292, 1771.3746, 1772.7195, 1774.0639,
	 1775.4079, 1776.7513, 1778.0942, 1779.4366, 1780.7785, 1782.1199, 1783.4609, 1784.8013, 1786.1412, 1787.4806,
	 1788.8196, 1790.158, 1791.4959, 1792.8333, 1794.1703, 1795.5067, 1796.8426, 1798.1781, 1799.513, 1800.8474,
	 1802.1814, 1803.5148, 1804.8477, 1806.1802, 1807.5121, 1808.8436, 1810.1745, 1811.5049, 1812.8349, 1814.1643,
	 1815.4933, 1816.8217, 1818.1496, 1819.4771, 1820.804, 1822.1304, 1823.4564, 1824.7818, 1826.1068, 1827.4312,
	 1828.7551, 1830.0786, 1831.4015, 1832.7239, 1834.0459, 1835.3673, 1836.6882, 1838.0087, 1839.3286, 1840.648,
	 1841.967, 1843.2854, 1844.6033, 1845.9207, 1847.2377, 1848.5541, 1849.87, 1851.1854, 1852.5003, 1853.8148,
	 1855.1287, 1856.4421, 1857.755, 1859.0674, 1860.3793, 1861.6907, 1863.0017, 1864.3121, 1865.622, 1866.9314,
	 1868.2403, 1869.5487, 1870.8566, 1872.164, 1873.4709, 1874.7773, 1876.0831, 1877.3885, 1878.6934, 1879.9978,
	 1881.3017, 1882.6051, 1883.9079, 1885.2103, 1886.5122, 1887.8136, 1889.1144, 1890.4148, 1891.7147, 1893.014,
	 1894.3129, 1895.6113, 1896.9091, 1898.2065, 1899.5033, 1900.7997, 1902.0955, 1903.3909, 1904.6857, 1905.98,
	 1907.2739, 1908.5672, 1909.86, 1911.1524, 1912.4442, 1913.7355, 1915.0263, 1916.3167, 1917.6065, 1918.8958,
	 1920.1846, 1921.4729, 1922.7607, 1924.048, 1925.3348, 1926.6211, 1927.9069, 1929.1922, 1930.477, 1931.7613,
	 1933.0451, 1934.3283, 1935.6111, 1936.8934, 1938.1752, 1939.4564, 1940.7372, 1942.0175, 1943.2972, 1944.5765,
	 1945.8552, 1947.1335, 1948.4112, 1949.6885, 1950.9652, 1952.2415, 1953.5172, 1954.7924, 1956.0672, 1957.3414,
	 1958.6151, 1959.8884, 1961.1611, 1962.4333, 1963.705, 1964.9762, 1966.2469, 1967.5171, 1968.7869, 1970.0561,
	 1971.3248, 1972.5929, 1973.8606, 1975.1278, 1976.3945, 1977.6607, 1978.9264, 1980.1916, 1981.4562, 1982.7204,
	 1983.9841, 1985.2473, 1986.5099, 1987.7721, 1989.0337, 1990.2949, 1991.5556, 1992.8157, 1994.0754, 1995.3345,
	 1996.5932, 1997.8513, 1999.1089, 2000.3661, 2001.6227, 2002.8788, 2004.1345, 2005.3896, 2006.6442, 2007.8983,
	 2009.152, 2010.4051, 2011.6577, 2012.9098, 2014.1614, 2015.4125, 2016.6631, 2017.9132, 2019.1628, 2020.4119,
	 2021.6605, 2022.9086, 2024.1562, 2025.4033, 2026.6499, 2027.896, 2029.1416, 2030.3866, 2031.6312, 2032.8753,
	 2034.1189, 2035.3619, 2036.6045, 2037.8466, 2039.0882, 2040.3292, 2041.5698, 2042.8098, 2044.0494, 2045.2885,
	 2046.527, 2047.7651, 2049.0026, 2050.2397, 2051.4762, 2052.7123, 2053.9478, 2055.1829, 2056.4174, 2057.6515,
	 2058.885, 2060.1181, 2061.3506, 2062.5826, 2063.8142, 2065.0452, 2066.2757, 2067.5058, 2068.7353, 2069.9643,
	 2071.1929, 2072.4209, 2073.6484, 2074.8755, 2076.102, 2077.328, 2078.5535, 2079.7786, 2081.0031, 2082.2271,
	 2083.4506, 2084.6737, 2085.8962, 2087.1182, 2088.3397, 2089.5608, 2090.7813, 2092.0013, 2093.2208, 2094.4398,
	 2095.6584, 2096.8764, 2098.0939, 2099.3109, 2100.5274, 2101.7435, 2102.959, 2104.174, 2105.3885, 2106.6026,
	 2107.8161, 2109.0291, 2110.2416, 2111.4537, 2112.6652, 2113.8762, 2115.0867, 2116.2968, 2117.5063, 2118.7153,
	 2119.9239, 2121.1319, 2122.3394, 2123.5464, 2124.753, 2125.959, 2127.1646, 2128.3696, 2129.5741, 2130.7782,
	 2131.9817, 2133.1848, 2134.3873, 2135.5894, 2136.7909, 2137.992, 2139.1925, 2140.3926, 2141.5921, 2142.7912,
	 2143.9898, 2145.1878, 2146.3854, 2147.5825, 2148.779, 2149.9751, 2151.1707, 2152.3658, 2153.5603, 2154.7544,
	 2155.948, 2157.1411, 2158.3337, 2159.5258, 2160.7174, 2161.9085, 2163.0991, 2164.2892, 2165.4788, 2166.6679,
	 2167.8566, 2169.0447, 2170.2323, 2171.4194, 2172.6061, 2173.7922, 2174.9778, 2176.163, 2177.3476, 2178.5318,
	 2179.7154, 2180.8986, 2182.0813, 2183.2634, 2184.4451, 2185.6263, 2186.807, 2187.9872, 2189.1669, 2190.3461,
	 2191.5248, 2192.703, 2193.8807, 2195.0579, 2196.2346, 2197.4109, 2198.5866, 2199.7618, 2200.9366, 2202.1108,
	 2203.2846, 2204.4579, 2205.6306, 2206.8029, 2207.9747, 2209.146, 2210.3168, 2211.4871, 2212.6569, 2213.8262,
	 2214.995, 2216.1633, 2217.3312, 2218.4985, 2219.6654, 2220.8317, 2221.9976, 2223.1629, 2224.3278, 2225.4922,
	 2226.6561, 2227.8195, 2228.9824, 2230.1448, 2231.3067, 2232.4681, 2233.6291, 2234.7895, 2235.9495, 2237.1089,
	 2238.2679, 2239.4264, 2240.5844, 2241.7419, 2242.8989, 2244.0554, 2245.2114, 2246.3669, 2247.522, 2248.6765,
	 2249.8306, 2250.9841, 2252.1372, 2253.2898, 2254.4419, 2255.5935, 2256.7446, 2257.8952, 2259.0453, 2260.195,
	 2261.3441, 2262.4928, 2263.641, 2264.7887, 2265.9359, 2267.0826, 2268.2288, 2269.3745, 2270.5197, 2271.6645,
	 2272.8087, 2273.9525, 2275.0958, 2276.2386, 2277.3809, 2278.5227, 2279.664, 2280.8049, 2281.9452, 2283.0851,
	 2284.2245, 2285.3634, 2286.5018, 2287.6397, 2288.7771, 2289.914, 2291.0505, 2292.1864, 2293.3219, 2294.4569,
	 2295.5914, 2296.7254, 2297.859, 2298.992, 2300.1246, 2301.2566, 2302.3882, 2303.5193, 2304.6499, 2305.78,
	 2306.9097, 2308.0388, 2309.1675, 2310.2957, 2311.4234, 2312.5506, 2313.6773, 2314.8035, 2315.9293, 2317.0546,
	 2318.1794, 2319.3037, 2320.4275, 2321.5508, 2322.6737, 2323.796, 2324.9179, 2326.0393, 2327.1602, 2328.2806,
	 2329.4006, 2330.52, 2331.639, 2332.7575, 2333.8755, 2334.9931, 2336.1101, 2337.2267, 2338.3427, 2339.4583,
	 2340.5735, 2341.6881, 2342.8022, 2343.9159, 2345.0291, 2346.1418, 2347.254, 2348.3658, 2349.477, 2350.5878,
	 2351.6981, 2352.8079, 2353.9172, 2355.0261, 2356.1344, 2357.2423, 2358.3497, 2359.4567, 2360.5631, 2361.6691,
	 2362.7746, 2363.8796, 2364.9841, 2366.0882, 2367.1917, 2368.2948, 2369.3974, 2370.4996, 2371.6012, 2372.7024,
	 2373.8031, 2374.9033, 2376.003, 2377.1023, 2378.2011, 2379.2994, 2380.3972, 2381.4945, 2382.5914, 2383.6878,
	 2384.7837, 2385.8791, 2386.9741, 2388.0685, 2389.1625, 2390.2561, 2391.3491, 2392.4417, 2393.5338, 2394.6254,
	 2395.7165, 2396.8072, 2397.8974, 2398.9871, 2400.0763, 2401.1651, 2402.2533, 2403.3411, 2404.4285, 2405.5153,
	 2406.6017, 2407.6876, 2408.773, 2409.858, 2410.9425, 2412.0265, 2413.11, 2414.1931, 2415.2756, 2416.3577,
	 2417.4394, 2418.5205, 2419.6012, 2420.6814, 2421.7612, 2422.8404, 2423.9192, 2424.9976, 2426.0754, 2427.1528,
	 2428.2297, 2429.3061, 2430.3821, 2431.4575, 2432.5326, 2433.6071, 2434.6812, 2435.7548, 2436.8279, 2437.9005,
	 2438.9727, 2440.0444, 2441.1157, 2442.1864, 2443.2567, 2444.3266, 2445.3959, 2446.4648, 2447.5332, 2448.6012,
	 2449.6686, 2450.7356, 2451.8022, 2452.8682, 2453.9338, 2454.999, 2456.0636, 2457.1278, 2458.1915, 2459.2548,
	 2460.3176, 2461.3799, 2462.4417, 2463.5031, 2464.564, 2465.6245, 2466.6844, 2467.7439, 2468.803, 2469.8615,
	 2470.9196, 2471.9773, 2473.0345, 2474.0912, 2475.1474, 2476.2032, 2477.2585, 2478.3133, 2479.3677, 2480.4216,
	 2481.475, 2482.528, 2483.5805, 2484.6325, 2485.6841, 2486.7352, 2487.7859, 2488.8361, 2489.8858, 2490.935,
	 2491.9838, 2493.0321, 2494.08, 2495.1274, 2496.1743, 2497.2208, 2498.2668, 2499.3123, 2500.3574, 2501.402,
	 2502.4462, 2503.4899, 2504.5331, 2505.5759, 2506.6182, 2507.66, 2508.7014, 2509.7423, 2510.7827, 2511.8227,
	 2512.8623, 2513.9013, 2514.9399, 2515.9781, 2517.0158, 2518.053, 2519.0898, 2520.1261, 2521.1619, 2522.1973,
	 2523.2322, 2524.2667, 2525.3007, 2526.3342, 2527.3673, 2528.3999, 2529.4321, 2530.4638, 2531.495, 2532.5258,
	 2533.5562, 2534.586, 2535.6154, 2536.6444, 2537.6729, 2538.7009, 2539.7285, 2540.7556, 2541.7823, 2542.8085,
	 2543.8343, 2544.8596, 2545.8844, 2546.9088, 2547.9327, 2548.9562, 2549.9792, 2551.0017, 2552.0238, 2553.0455,
	 2554.0667, 2555.0874, 2556.1077, 2557.1275, 2558.1469, 2559.1658, 2560.1843, 2561.2023, 2562.2198, 2563.2369,
	 2564.2535, 2565.2697, 2566.2855, 2567.3007, 2568.3156, 2569.3299, 2570.3439, 2571.3573, 2572.3704, 2573.3829,
	 2574.395, 2575.4067, 2576.4179, 2577.4286, 2578.4389, 2579.4488, 2580.4582, 2581.4671, 2582.4756, 2583.4837,
	 2584.4913, 2585.4984, 2586.5051, 2587.5113, 2588.5171, 2589.5225, 2590.5274, 2591.5318, 2592.5358, 2593.5393,
	 2594.5424, 2595.5451, 2596.5473, 2597.549, 2598.5503, 2599.5511, 2600.5515, 2601.5515, 2602.551, 2603.5501,
	 2604.5487, 2605.5468, 2606.5445, 2607.5418, 2608.5386, 2609.535, 2610.5309, 2611.5264, 2612.5214, 2613.516,
	 2614.5101, 2615.5038, 2616.4971, 2617.4899, 2618.4822, 2619.4741, 2620.4656, 2621.4566, 2622.4472, 2623.4373,
	 2624.427, 2625.4162, 2626.405, 2627.3934, 2628.3813, 2629.3687, 2630.3558, 2631.3423, 2632.3285, 2633.3142,
	 2634.2994, 2635.2842, 2636.2686, 2637.2525, 2638.236, 2639.219, 2640.2016, 2641.1837, 2642.1654, 2643.1467,
	 2644.1275, 2645.1079, 2646.0878, 2647.0674, 2648.0464, 2649.025, 2650.0032, 2650.9809, 2651.9582, 2652.9351,
	 2653.9115, 2654.8875, 2655.863, 2656.8381, 2657.8128, 2658.787, 2659.7608, 2660.7342, 2661.7071, 2662.6795,
	 2663.6516, 2664.6232, 2665.5943, 2666.565, 2667.5353, 2668.5051, 2669.4745, 2670.4435, 2671.412, 2672.3801,
	 2673.3478, 2674.315, 2675.2818, 2676.2482, 2677.2141, 2678.1795, 2679.1446, 2680.1092, 2681.0734, 2682.0371,
	 2683.0004, 2683.9633, 2684.9257, 2685.8877, 2686.8493, 2687.8104, 2688.7711, 2689.7314, 2690.6912, 2691.6506,
	 2692.6095, 2693.5681, 2694.5262, 2695.4838, 2696.4411, 2697.3979, 2698.3542, 2699.3102, 2700.2657, 2701.2207,
	 2702.1754, 2703.1296, 2704.0834, 2705.0367, 2705.9896, 2706.9421, 2707.8942, 2708.8458, 2709.797, 2710.7477,
	 2711.6981, 2712.648, 2713.5975, 2714.5465, 2715.4951, 2716.4433, 2717.3911, 2718.3384, 2719.2853, 2720.2318,
	 2721.1778, 2722.1234, 2723.0686, 2724.0134, 2724.9577, 2725.9016, 2726.8451, 2727.7882, 2728.7308, 2729.673,
	 2730.6148, 2731.5561, 2732.497, 2733.4375, 2734.3776, 2735.3172, 2736.2564, 2737.1952, 2738.1336, 2739.0715,
	 2740.0091, 2740.9462, 2741.8828, 2742.8191, 2743.7549, 2744.6903, 2745.6253, 2746.5598, 2747.4939, 2748.4276,
	 2749.3609, 2750.2938, 2751.2262, 2752.1582, 2753.0898, 2754.021, 2754.9517, 2755.882, 2756.8119, 2757.7414,
	 2758.6705, 2759.5991, 2760.5273, 2761.4551, 2762.3825, 2763.3095, 2764.236, 2765.1621, 2766.0878, 2767.0131,
	 2767.9379, 2768.8624, 2769.7864, 2770.71, 2771.6332, 2772.5559, 2773.4783, 2774.4002, 2775.3217, 2776.2428,
	 2777.1634, 2778.0837, 2779.0035, 2779.9229, 2780.8419, 2781.7605, 2782.6787, 2783.5964, 2784.5138, 2785.4307,
	 2786.3472, 2787.2633, 2788.1789, 2789.0942, 2790.009, 2790.9234, 2791.8374, 2792.751, 2793.6642, 2794.577,
	 2795.4893, 2796.4012, 2797.3128, 2798.2239, 2799.1345, 2800.0448, 2800.9547, 2801.8641, 2802.7732, 2803.6818,
	 2804.59, 2805.4978, 2806.4052, 2807.3122, 2808.2187, 2809.1249, 2810.0306, 2810.9359, 2811.8409, 2812.7454,
	 2813.6495, 2814.5531, 2815.4564, 2816.3593, 2817.2617, 2818.1638, 2819.0654, 2819.9666, 2820.8674, 2821.7678,
	 2822.6678, 2823.5674, 2824.4666, 2825.3654, 2826.2637, 2827.1617, 2828.0592, 2828.9563, 2829.8531, 2830.7494,
	 2831.6453, 2832.5408, 2833.4359, 2834.3306, 2835.2249, 2836.1188, 2837.0122, 2837.9053, 2838.7979, 2839.6902,
	 2840.582, 2841.4735, 2842.3645, 2843.2551, 2844.1454, 2845.0352, 2845.9246, 2846.8136, 2847.7022, 2848.5904,
	 2849.4782, 2850.3656, 2851.2526, 2852.1392, 2853.0254, 2853.9112, 2854.7965, 2855.6815, 2856.5661, 2857.4503,
	 2858.334, 2859.2174, 2860.1004, 2860.9829, 2861.8651, 2862.7468, 2863.6282, 2864.5092, 2865.3897, 2866.2699,
	 2867.1496, 2868.029, 2868.9079, 2869.7865, 2870.6646, 2871.5424, 2872.4198, 2873.2967, 2874.1733, 2875.0494,
	 2875.9252, 2876.8006, 2877.6755, 2878.5501, 2879.4243, 2880.298, 2881.1714, 2882.0444, 2882.9169, 2883.7891,
	 2884.6609, 2885.5323, 2886.4033, 2887.2739, 2888.1441, 2889.0139, 2889.8833, 2890.7523, 2891.6209, 2892.4891,
	 2893.3569, 2894.2244, 2895.0914, 2895.958, 2896.8243, 2897.6901, 2898.5556, 2899.4207, 2900.2853, 2901.1496,
	 2902.0135, 2902.877, 2903.7401, 2904.6028, 2905.4651, 2906.327, 2907.1885, 2908.0496, 2908.9104, 2909.7707,
	 2910.6307, 2911.4902, 2912.3494, 2913.2082, 2914.0666, 2914.9246, 2915.7822, 2916.6394, 2917.4963, 2918.3527,
	 2919.2087, 2920.0644, 2920.9197, 2921.7746, 2922.629, 2923.4831, 2924.3369, 2925.1902, 2926.0431, 2926.8957,
	 2927.7478, 2928.5996, 2929.451, 2930.302, 2931.1526, 2932.0028, 2932.8526, 2933.7021, 2934.5512, 2935.3998,
	 2936.2481, 2937.096, 2937.9435, 2938.7907, 2939.6374, 2940.4838, 2941.3297, 2942.1753, 2943.0205, 2943.8653,
	 2944.7098, 2945.5538, 2946.3975, 2947.2408, 2948.0837, 2948.9262, 2949.7683, 2950.6101, 2951.4514, 2952.2924,
	 2953.133, 2953.9732, 2954.813, 2955.6525, 2956.4916, 2957.3303, 2958.1686, 2959.0065, 2959.844, 2960.6812,
	 2961.518, 2962.3544, 2963.1904, 2964.026, 2964.8613, 2965.6961, 2966.5306, 2967.3647, 2968.1985, 2969.0318,
	 2969.8648, 2970.6974, 2971.5296, 2972.3615, 2973.1929, 2974.024, 2974.8547, 2975.685, 2976.515, 2977.3446,
	 2978.1738, 2979.0026, 2979.831, 2980.6591, 2981.4868, 2982.3141, 2983.141, 2983.9676, 2984.7937, 2985.6195,
	 2986.445, 2987.27, 2988.0947, 2988.919, 2989.7429, 2990.5665, 2991.3896, 2992.2124, 2993.0349, 2993.8569,
	 2994.6786, 2995.4999, 2996.3208, 2997.1414, 2997.9616, 2998.7814, 2999.6008, 3000.4199, 3001.2386, 3002.0569,
	 3002.8749, 3003.6924, 3004.5096, 3005.3265, 3006.1429, 3006.959, 3007.7747, 3008.5901, 3009.4051, 3010.2197,
	 3011.0339, 3011.8478, 3012.6612, 3013.4744, 3014.2871, 3015.0995, 3015.9115, 3016.7232, 3017.5344, 3018.3454,
	 3019.1559, 3019.9661, 3020.7759, 3021.5853, 3022.3944, 3023.2031, 3024.0114, 3024.8193, 3025.6269, 3026.4342,
	 3027.241, 3028.0475, 3028.8536, 3029.6594, 3030.4648, 3031.2698, 3032.0745, 3032.8788, 3033.6827, 3034.4863,
	 3035.2895, 3036.0923, 3036.8948, 3037.6969, 3038.4986, 3039.3, 3040.101, 3040.9017, 3041.7019, 3042.5019,
	 3043.3014, 3044.1006, 3044.8994, 3045.6979, 3046.496, 3047.2938, 3048.0911, 3048.8881, 3049.6848, 3050.4811,
	 3051.277, 3052.0726, 3052.8678, 3053.6626, 3054.4571, 3055.2512, 3056.045, 3056.8384, 3057.6315, 3058.4241,
	 3059.2165, 3060.0084, 3060.8, 3061.5913, 3062.3821, 3063.1727, 3063.9628, 3064.7526, 3065.5421, 3066.3312,
	 3067.1199, 3067.9083, 3068.6963, 3069.4839, 3070.2712, 3071.0582, 3071.8448, 3072.631, 3073.4169, 3074.2024,
	 3074.9875, 3075.7723, 3076.5568, 3077.3409, 3078.1246, 3078.908, 3079.691, 3080.4737, 3081.256, 3082.0379,
	 3082.8195, 3083.6008, 3084.3817, 3085.1622, 3085.9424, 3086.7222, 3087.5017, 3088.2808, 3089.0596, 3089.838,
	 3090.616, 3091.3938, 3092.1711, 3092.9481, 3093.7248, 3094.5011, 3095.277, 3096.0526, 3096.8278, 3097.6027,
	 3098.3773, 3099.1515, 3099.9253, 3100.6988, 3101.4719, 3102.2447, 3103.0171, 3103.7892, 3104.561, 3105.3323,
	 3106.1034, 3106.8741, 3107.6444, 3108.4144, 3109.184, 3109.9533, 3110.7222, 3111.4908, 3112.2591, 3113.027,
	 3113.7945, 3114.5617, 3115.3286, 3116.0951, 3116.8612, 3117.627, 3118.3925, 3119.1576, 3119.9224, 3120.6868,
	 3121.4509, 3122.2146, 3122.978, 3123.741, 3124.5037, 3125.2661, 3126.0281, 3126.7898, 3127.5511, 3128.312,
	 3129.0727, 3129.8329, 3130.5929, 3131.3525, 3132.1117, 3132.8706, 3133.6292, 3134.3874, 3135.1453, 3135.9028,
	 3136.66, 3137.4168, 3138.1733, 3138.9295, 3139.6853, 3140.4408, 3141.1959, 3141.9507, 3142.7052, 3143.4593,
	 3144.213, 3144.9665, 3145.7196, 3146.4723, 3147.2247, 3147.9768, 3148.7285, 3149.4799, 3150.2309, 3150.9816,
	 3151.732, 3152.482, 3153.2317, 3153.9811, 3154.7301, 3155.4787, 3156.2271, 3156.9751, 3157.7227, 3158.4701,
	 3159.217, 3159.9637, 3160.71, 3161.456, 3162.2016, 3162.9469, 3163.6918, 3164.4365, 3165.1808, 3165.9247,
	 3166.6683, 3167.4116, 3168.1545, 3168.8971, 3169.6394, 3170.3813, 3171.1229, 3171.8642, 3172.6051, 3173.3457,
	 3174.086, 3174.8259, 3175.5655, 3176.3048, 3177.0437, 3177.7823, 3178.5206, 3179.2585, 3179.9961, 3180.7333,
	 3181.4703, 3182.2069, 3182.9431, 3183.6791, 3184.4147, 3185.1499, 3185.8849, 3186.6195, 3187.3537, 3188.0877,
	 3188.8213, 3189.5546, 3190.2875, 3191.0201, 3191.7524, 3192.4844, 3193.216, 3193.9473, 3194.6783, 3195.4089,
	 3196.1392, 3196.8692, 3197.5989, 3198.3282, 3199.0572, 3199.7858, 3200.5142, 3201.2422, 3201.9699, 3202.6972,
	 3203.4242, 3204.1509, 3204.8773, 3205.6033, 3206.3291, 3207.0545, 3207.7795, 3208.5043, 3209.2287, 3209.9527,
	 3210.6765, 3211.3999, 3212.123, 3212.8458, 3213.5683, 3214.2904, 3215.0122, 3215.7337, 3216.4548, 3217.1757,
	 3217.8962, 3218.6164, 3219.3362, 3220.0558, 3220.775, 3221.4939, 3222.2124, 3222.9307, 3223.6486, 3224.3662,
	 3225.0834, 3225.8004, 3226.517, 3227.2333, 3227.9493, 3228.665, 3229.3803, 3230.0953, 3230.81, 3231.5244,
	 3232.2384, 3232.9522, 3233.6656, 3234.3787, 3235.0915, 3235.8039, 3236.516, 3237.2278, 3237.9393, 3238.6505,
	 3239.3614, 3240.0719, 3240.7821, 3241.492, 3242.2016, 3242.9108, 3243.6198, 3244.3284, 3245.0367, 3245.7447,
	 3246.4523, 3247.1597, 3247.8667, 3248.5734, 3249.2798, 3249.9859, 3250.6917, 3251.3971, 3252.1023, 3252.8071,
	 3253.5116, 3254.2158, 3254.9196, 3255.6232, 3256.3264, 3257.0293, 3257.7319, 3258.4342, 3259.1362, 3259.8379,
	 3260.5392, 3261.2402, 3261.9409, 3262.6413, 3263.3414, 3264.0412, 3264.7407, 3265.4398, 3266.1387, 3266.8372,
	 3267.5354, 3268.2333, 3268.9309, 3269.6281, 3270.3251, 3271.0217, 3271.7181, 3272.4141, 3273.1098, 3273.8052,
	 3274.5003, 3275.1951, 3275.8895, 3276.5837, 3277.2775, 3277.9711, 3278.6643, 3279.3572, 3280.0498, 3280.7421,
	 3281.4341, 3282.1258, 3282.8171, 3283.5082, 3284.1989, 3284.8894, 3285.5795, 3286.2693, 3286.9588, 3287.648,
	 3288.3369, 3289.0255, 3289.7138, 3290.4018, 3291.0894, 3291.7768, 3292.4638, 3293.1506, 3293.837, 3294.5232,
	 3295.209, 3295.8945, 3296.5797, 3297.2646, 3297.9492, 3298.6335, 3299.3175, 3300.0012, 3300.6845, 3301.3676,
	 3302.0504, 3302.7328, 3303.415, 3304.0969, 3304.7784, 3305.4597, 3306.1406, 3306.8212, 3307.5016, 3308.1816,
	 3308.8613, 3309.5407, 3310.2199, 3310.8987, 3311.5772, 3312.2554, 3312.9333, 3313.6109, 3314.2882, 3314.9652};

//GLOBALISAK
//Sharp ADC
volatile bool SHARP_FRONT_valid=false;
uint16_t SHARP_FRONT_raw =0;
int32_t SHARP_FRONT_filtered=0;
int32_t SHARP_FRONT_array[20]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

//LABRANGATO
volatile uint32_t actualmotorinput=0;
volatile uint32_t previousmotorinput=0;
bool stop_deadman = false;

//Motor
uint32_t motorpulsePWM=0;
bool stop = false;
bool stop_cel = false;

//Utemezo
volatile uint32_t timestamp;
volatile bool tick=false;

//Encoder
volatile int32_t actualencoderval=0;
int32_t encoder_aktualis=0;
int32_t encoder_elozo=0;
int32_t encoder_diff=0;
int32_t velocity;
HAL_TIM_StateTypeDef encoder_state;

//Vonalszenzor UART
volatile bool vonalszenzor_uzenetjott=false;
uint8_t uzenetarray[5]={0,0,0,0,0};
uint16_t pozicio_elso=1600;
uint16_t pozicio_masodik=1200;
uint8_t vonaltipus=EGYVONAL;
int16_t orientacio=0;
uint32_t szervoPWM;

//Safety car
bool safetycar_aktiv=true;
char string[20];
bool stop_safetycar=false;





/* USER CODE END PV */

/* Private function prototypes -----------------------------------------------*/
void SystemClock_Config(void);
void Error_Handler(void);

/* USER CODE BEGIN PFP */
/* Private function prototypes -----------------------------------------------*/
void Motorkezeles();
void Vonalszenzorkezeles_uartfogadas();
void allapotteres_szabalyozo(uint16_t* pozicio, int16_t* orientacio, int32_t* sebesseg, uint32_t* PWMeredmeny);
void WMAfilter(int32_t* filteredval, int32_t* newelement, int32_t* array, uint32_t filter_depth);
void Encoder_beolvasas();
void Safety_car();
/* USER CODE END PFP */

/* USER CODE BEGIN 0 */

void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef* hadc)
{
	if (hadc->Instance == ADC1)
		SHARP_FRONT_valid = true; //eleg egyet beolvasni
}
void HAL_TIM_IC_CaptureCallback(TIM_HandleTypeDef* htim)
{
	if (htim->Instance == TIM4)
	{
		previousmotorinput = actualmotorinput;
		actualmotorinput = HAL_TIM_ReadCapturedValue(&htim4,TIM_CHANNEL_1);
		__HAL_TIM_SET_COUNTER(&htim4,0);
	}
}
void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)
{
	if(htim->Instance == TIM7)
	{
		timestamp++;
		actualencoderval=HAL_TIM_ReadCapturedValue(&htim2, TIM_CHANNEL_1);
		tick = true;
	}
}

void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)
{
	if (huart->Instance ==USART1)
	{
		vonalszenzor_uzenetjott=true;
	}
}
//Uart neha csinal random ORE-t
void HAL_UART_ErrorCallback(UART_HandleTypeDef *huart)
{
	if (huart->Instance ==USART1)
	{
	    if (huart->ErrorCode == HAL_UART_ERROR_ORE)//Nha random overrun hiba, ekkor kinullzuk
	    {
	            // remove the error condition
	            huart->ErrorCode = HAL_UART_ERROR_NONE;
	            // set the correct state, so that the UART_RX_IT works correctly
	            huart->gState = HAL_UART_STATE_BUSY_RX;
	    }
	}
}


/* USER CODE END 0 */

int main(void)
{

  /* USER CODE BEGIN 1 */

  /* USER CODE END 1 */

  /* MCU Configuration----------------------------------------------------------*/

  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  HAL_Init();

  /* Configure the system clock */
  SystemClock_Config();

  /* Initialize all configured peripherals */
  MX_GPIO_Init();
  MX_DMA_Init();
  MX_ADC1_Init();
  MX_SPI1_Init();
  MX_TIM1_Init();
  MX_TIM2_Init();
  MX_TIM8_Init();
  MX_UART4_Init();
  MX_UART5_Init();
  MX_USART1_UART_Init();
  MX_TIM6_Init();
  MX_USART2_UART_Init();
  MX_TIM4_Init();
  MX_TIM7_Init();

  /* USER CODE BEGIN 2 */

  HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_2);
  HAL_TIMEx_PWMN_Start(&htim8, TIM_CHANNEL_3);
  __HAL_TIM_SET_COMPARE(&htim8, TIM_CHANNEL_3, 6932);
  HAL_TIM_Base_Start_IT(&htim7);
  HAL_TIM_IC_Start_IT(&htim4,TIM_CHANNEL_1);
  HAL_TIM_Encoder_Start(&htim2, TIM_CHANNEL_1);

  //Vonalszenzortol uzenetek fogadasa
  HAL_UART_Receive_DMA(&huart1, uzenetarray, 5);

  //Alap sebesseg megadasa
  motorpulsePWM = 7500;

  /* USER CODE END 2 */

  /* Infinite loop */
  /* USER CODE BEGIN WHILE */
  while (1)
  {
  /* USER CODE END WHILE */

  /* USER CODE BEGIN 3 */

	  if(vonalszenzor_uzenetjott==true) //3ms-onkent kapunk uzenetet
	  {
		  Vonalszenzorkezeles_uartfogadas();
	  }
	  Motorkezeles();


	  if(tick) //10ms
	  {
		  HAL_ADC_Start_DMA(&hadc1, (uint32_t*) &SHARP_FRONT_raw, 1); //SHARP front adc elinditasa

		  Encoder_beolvasas();


		  while(!SHARP_FRONT_valid);//Ha mar letelt az ad konverzio ideje, akkor szurjuk a kapott AD erteket
		  WMAfilter(&SHARP_FRONT_filtered,(int32_t*)&(SHARP_FRONT_raw),SHARP_FRONT_array,20);
		  if(safetycar_aktiv)
		  {
			  Safety_car();
		  }

		  tick=false;
	  }
  }
  /* USER CODE END 3 */

}

/** System Clock Configuration
*/
void SystemClock_Config(void)
{

  RCC_OscInitTypeDef RCC_OscInitStruct;
  RCC_ClkInitTypeDef RCC_ClkInitStruct;

    /**Configure the main internal regulator output voltage 
    */
  __HAL_RCC_PWR_CLK_ENABLE();

  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);

    /**Initializes the CPU, AHB and APB busses clocks 
    */
  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;
  RCC_OscInitStruct.HSEState = RCC_HSE_ON;
  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
  RCC_OscInitStruct.PLL.PLLM = 4;
  RCC_OscInitStruct.PLL.PLLN = 180;
  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
  RCC_OscInitStruct.PLL.PLLQ = 2;
  RCC_OscInitStruct.PLL.PLLR = 2;
  if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
  {
    Error_Handler();
  }

    /**Activate the Over-Drive mode 
    */
  if (HAL_PWREx_EnableOverDrive() != HAL_OK)
  {
    Error_Handler();
  }

    /**Initializes the CPU, AHB and APB busses clocks 
    */
  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV2;

  if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_5) != HAL_OK)
  {
    Error_Handler();
  }

    /**Configure the Systick interrupt time 
    */
  HAL_SYSTICK_Config(HAL_RCC_GetHCLKFreq()/1000);

    /**Configure the Systick 
    */
  HAL_SYSTICK_CLKSourceConfig(SYSTICK_CLKSOURCE_HCLK);

  /* SysTick_IRQn interrupt configuration */
  HAL_NVIC_SetPriority(SysTick_IRQn, 0, 0);
}

/* USER CODE BEGIN 4 */
void Vonalszenzorkezeles_uartfogadas()
{
	  //UART uzenet fogadasa a vonalszenzortol
	  pozicio_elso = uzenetarray[0] + uzenetarray[1]*0xff;
	  pozicio_masodik = uzenetarray[2] + uzenetarray[3]*0xff;
	  vonaltipus=uzenetarray[4];
	  orientacio=pozicio_elso-pozicio_masodik;
	  allapotteres_szabalyozo(&pozicio_elso, &orientacio, &velocity, &szervoPWM);
	  __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_2, szervoPWM);
	  vonalszenzor_uzenetjott=false;
}

void Motorkezeles()
{
	  if(((actualmotorinput < previousmotorinput) ? actualmotorinput : previousmotorinput) < 4000)
		  stop_deadman = true;
	  else
		  stop_deadman = false;
	  if (stop_deadman || stop_cel || stop_safetycar)
		  stop = true;
	  else
		  stop = false;

	  if(timestamp > 500)
	  {
		  if (!stop)
			  __HAL_TIM_SET_COMPARE(&htim8, TIM_CHANNEL_3, motorpulsePWM);
		  else if (encoder_diff > 3)
			  __HAL_TIM_SET_COMPARE(&htim8, TIM_CHANNEL_3, 4000);
		  else
			  __HAL_TIM_SET_COMPARE(&htim8, TIM_CHANNEL_3, 6932);
	  }
}

void allapotteres_szabalyozo(uint16_t* pozicio, int16_t* orientacio, int32_t* sebesseg, uint32_t* PWMeredmeny)
{
	float sebesseg_a_szabalyozonak = 0.0;
	//if(*sebesseg>1250)
		sebesseg_a_szabalyozonak=((float)*sebesseg)/1000.0; //[m/s]
	//arctaneredmeny=atan_lut[*orientacio+2300];
	//*PWMeredmeny = (uint32_t) (-251.1077*(2*((float)*pozicio)-3300)/(757.4729*(0.38889*((float)*sebesseg)+1.0556)*(0.38889*((float)*sebesseg)+1.0556))+(-0.855-0.63*((float)*sebesseg))*arctaneredmeny/((0.38889*((float)*sebesseg)+1.0556)*(0.38889*((float)*sebesseg)+1.0556))+6763.5);
	//*PWMeredmeny = (uint32_t) (-251.1077*(2*((float)*pozicio)-3300)/(757.4729*(0.5*((float)*sebesseg)+0.4)*(0.5*((float)*sebesseg)+0.4))+(0.207-0.81*((float)*sebesseg))*atan_lut[*orientacio+2300]/((0.5*((float)*sebesseg)+0.4)*(0.5*((float)*sebesseg)+0.4))+6763.5);
	//*PWMeredmeny = (uint32_t) (-251.1077*(2*((float)*pozicio)-3300)/(757.4729*(0.5*((float)*sebesseg)+0.5)*(0.5*((float)*sebesseg)+0.5))+(0.045-0.81*((float)*sebesseg))*atan_lut[*orientacio+2300]/((0.5*((float)*sebesseg)+0.5)*(0.5*((float)*sebesseg)+0.5))+6763.5);
	//meredekebb a D uthossz
	*PWMeredmeny = (uint32_t) (-251.1077*(2*((float)*pozicio)-3300)/(757.4729*(0.8*sebesseg_a_szabalyozonak+0.537)*(0.8*sebesseg_a_szabalyozonak+0.537))+(-0.01494-1.296*sebesseg_a_szabalyozonak)*atan_lut[*orientacio+2300]/((0.8*sebesseg_a_szabalyozonak+0.537)*(0.8*sebesseg_a_szabalyozonak+0.537))+6763.5);

	//0.53 a D, 1250 mm/s utan megyunk at seb.fuggesbe
	//*PWMeredmeny = (uint32_t) (-251.1077*(2*((float)*pozicio)-3300)/(757.4729*(0.5*sebesseg_a_szabalyozonak+0.537)*(0.5*sebesseg_a_szabalyozonak+0.537))+(-0.01494-0.81*sebesseg_a_szabalyozonak)*atan_lut[*orientacio+2300]/((0.5*sebesseg_a_szabalyozonak+0.537)*(0.5*sebesseg_a_szabalyozonak+0.537))+6763.5);

	//*PWMeredmeny = (uint32_t) (-251.1077*(2*((float)*pozicio)-3300)/(1082.1041*(0.00038889*(0.0)+1.0556)*(0.00038889*(0.0)+1.0556))-(-0.855-0.00063*(0.0))*arctaneredmeny/((0.00038889*(0.0)+1.0556)*(0.00038889*(0.0)+1.0556))+6763.5);
	//*PWMeredmeny = (uint32_t) (-251.1077*(2*((float)*pozicio)-3300)/(1082.1041*(0.00038889*((float)*sebesseg)+1.0556)*(0.00038889*((float)*sebesseg)+1.0556))-(-0.855-0.00063*((float)*sebesseg))*arctaneredmeny/((0.00038889*((float)*sebesseg)+1.0556)*(0.00038889*((float)*sebesseg)+1.0556))+6763.5);
	if(*PWMeredmeny > 7883)
		*PWMeredmeny=7883;
	else if(*PWMeredmeny < 5644)
		*PWMeredmeny=5644;
}
void WMAfilter(int32_t* filteredval, int32_t* newelement, int32_t* array, uint32_t filter_depth)
{
	*filteredval=0;
	int32_t coeffsum=0;

	for(int i=0; i<filter_depth-1; i++)
	{
		array[i]=array[i+1];
		*filteredval=*filteredval+array[i]*(i+1);
		coeffsum+=(i+1);
	}
	array[filter_depth-1]=*newelement;
	*filteredval=*filteredval+array[filter_depth-1]*(filter_depth);
	coeffsum+=(filter_depth);
	*filteredval=*filteredval/coeffsum;
}
void Encoder_beolvasas() //!!!Fix idokozonkent kell hivni, szamit ra a fuggveny (10ms)
{
	  encoder_state = HAL_TIM_Encoder_GetState(&htim2);
	  if(encoder_state==HAL_TIM_STATE_READY)
	  {
		  encoder_aktualis=actualencoderval*2;//valami rossza az enkoderrel, valszeg nem kapjuk meg az egyik channelt
		  encoder_diff=encoder_aktualis-encoder_elozo;
		  velocity=encoder_diff*10000/743;//velocity=((encoderdiff*10000)/743); //v[mm/s]
		  encoder_elozo=encoder_aktualis;
	  }
	  else
	  {
		  //error handling...
	  }
}
void Safety_car()
{
	static uint32_t stop_kezdete=0;
	if(SHARP_FRONT_filtered > 2000) //35cm
	{
		stop_safetycar=true;
		stop_kezdete=timestamp;
	}
	else if(SHARP_FRONT_filtered > 1200) //55cm
	{
		motorpulsePWM=7270;
	}
	else if(SHARP_FRONT_filtered > 800) //85cm
	{
		motorpulsePWM=7300;
	}
	else if(SHARP_FRONT_filtered < 600) //95cm
		motorpulsePWM=7360;


	if(SHARP_FRONT_filtered < 2000 && timestamp-stop_kezdete > 25)  //250 msig allunk
	{
		stop_safetycar=false;
	}
	if(pozicio_elso > 1900 || pozicio_elso < 1300) //Kanyari max sebesseg
		motorpulsePWM=7300;

	if((timestamp%10)==1)
	{
		sprintf(&string,"..........\r\n");
		sprintf(&string,"%d\t%d",SHARP_FRONT_filtered, velocity);
		HAL_UART_Transmit_DMA(&huart2, &string, sizeof(string)*sizeof(uint8_t));
	}
}
/* USER CODE END 4 */

/**
  * @brief  This function is executed in case of error occurrence.
  * @param  None
  * @retval None
  */
void Error_Handler(void)
{
  /* USER CODE BEGIN Error_Handler */
  /* User can add his own implementation to report the HAL error return state */
  while(1) 
  {
  }
  /* USER CODE END Error_Handler */ 
}

#ifdef USE_FULL_ASSERT

/**
   * @brief Reports the name of the source file and the source line number
   * where the assert_param error has occurred.
   * @param file: pointer to the source file name
   * @param line: assert_param error line source number
   * @retval None
   */
void assert_failed(uint8_t* file, uint32_t line)
{
  /* USER CODE BEGIN 6 */
  /* User can add his own implementation to report the file name and line number,
    ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
  /* USER CODE END 6 */

}

#endif

/**
  * @}
  */ 

/**
  * @}
*/ 

/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/
